!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.ConditionWatcher=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./Cookies.js");c.ConditionWatcher=function(){function a(b,c){d(this,a),this.globCond=b;var e=this.conditions=b.showCondition;this.id=c,this.instant=void 0!=e.instant?e.instant:!0,this.pageScroll=+e.onPageScroll||0,this.onLeave=e.onLeave||!1,this.delay=+e.delay||0,this.leaveWatcher=this.leaveWatcher.bind(this),this.scrollWatcher=this.scrollWatcher.bind(this)}return e(a,[{key:"watch",value:function(){return new Promise(this.promiseCore.bind(this))}},{key:"promiseCore",value:function(a,b){return this.resolve=a,this.reject=b,this.isDone=!1,this.isRejectByCookie()?void b():this.instant?void a():void(this.pageScroll&&(document.addEventListener("scroll",this.scrollWatcher),this.scrollWatcher(),this.isDone)||(this.onLeave&&document.addEventListener("mouseleave",this.leaveWatcher),this.delay&&(this.timeoutID=setTimeout(this.delayWatcher.bind(this),1e3*this.delay))))}},{key:"isRejectByCookie",value:function(){if(this.globCond.ignoreCookie)return!1;if(f.Cookies.has("__sendsay_forms_"+this.id)){if(f.Cookies.get("__sendsay_forms_"+this.id)==this.globCond.frequency)return!0;if(this.globCond.frequency)return f.Cookies.set("__sendsay_forms_"+this.id,this.globCond.frequency,this.globCond.frequency),!0;f.Cookies.remove("__sendsay_forms_"+this.id)}return void 0!=this.conditions.multipleSubmit&&!this.conditions.multipleSubmit&&f.Cookies.has("__sendsay_forms_submit_"+this.id)?!0:!!(this.conditions.maxCount&&f.Cookies.has("__sendsay_forms_count_"+this.id)&&+f.Cookies.get("__sendsay_forms_count_"+this.id)>=+this.conditions.maxCount)}},{key:"scrollWatcher",value:function(a){var b=document.documentElement.scrollTop||window.pageYOffset,c=document.documentElement.scrollHeight-document.documentElement.clientHeight,d=this.pageScroll;(0>=c||b/c*100>=d)&&this.satisfyCondition()}},{key:"leaveWatcher",value:function(a){this.satisfyCondition()}},{key:"delayWatcher",value:function(){this.satisfyCondition()}},{key:"satisfyCondition",value:function(){this.isDone=!0,this.stopWatch(),this.resolve()}},{key:"stopWatch",value:function(){document.removeEventListener("scroll",this.scrollWatcher),document.removeEventListener("mouseleave",this.leaveWatcher),this.timeoutID&&clearTimeout(this.timeoutID)}}]),a}()},{"./Cookies.js":3}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.Connector=function(){function a(b){d(this,a),this.url=b,this.id=this.extractID(this.url)||""}return e(a,[{key:"extractID",value:function(a){var b=a.match(/[^/s\/]*\/[^/s\/]*\/?$/);if(b){var c=b[0].split("/");return c[0]+"-"+c[1]}}},{key:"promiseHandler",value:function(a,b){var c=this;this.request.onreadystatechange=function(){if(4==c.request.readyState){c.pending=!1;var d=!0;c.request.onReady&&(d=c.request.onReady.apply(c)),200==c.request.status&&d?a(c.data):b(!1)}},this.pending=!0,this.request.send(this.params)}},{key:"load",value:function(){return this.pending?void 0:(this.request=new XMLHttpRequest,this.request.open("GET",this.url,!0),this.request.setRequestHeader("Content-Type","application/json"),new Promise(this.promiseHandler.bind(this)).then(this.handleLoadSuccess.bind(this),this.handleLoadFail.bind(this)))}},{key:"transformAnswer",value:function(a){if(a.settings)return this.data=a.settings,this.data.id=this.id,void(a.state&&1===+a.state&&(this.data.active=!0));if(this.data={endDialogMessage:"Спасибо за заполнение формы!",elements:[{type:"text",text:'<div style="font-size: 16px; padding-bottom: 10px; font-weight: bold;">Подписка на рассылку</div>'}],id:this.id},this.data.active="1"==a.state||!1,a.fields){var b=a.fields;for(var c in b){var d=b[c];"submit"!==d.type&&this.data.elements.push({type:"text"==d.type?"field":d.type,field:{id:d.name,required:"1"==d.required,answers:d.answers,order:d.order},content:{label:d.label},appearance:{hidden:d.hidden},subtype:d.data_type})}this.data.elements.push({type:"button",content:{text:"Подписаться"},appearance:{align:"justify"}})}a.name&&(this.data.title=a.name)}},{key:"submit",value:function(a){return this.pending?void 0:(this.request=new XMLHttpRequest,this.request.open("POST",this.url,!0),this.request.setRequestHeader("Content-Type","application/json"),this.request.onReady=this.handleSubmitResult,this.params=JSON.stringify(a),new Promise(this.promiseHandler.bind(this)))}},{key:"handleSubmitResult",value:function(){var a=document.createElement("div"),b=void 0;a.innerHTML=this.request.responseText;try{b=JSON.parse(this.request.responseText)}catch(c){return console.log(c),!1}return this.error=b,!b.id}},{key:"handleLoadSuccess",value:function(){var a=this.request.responseText,b=JSON.parse(a);this.transformAnswer(b)}},{key:"handleLoadFail",value:function(){}}]),a}()},{}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.Cookies=function(){function a(){d(this,a)}return e(a,null,[{key:"get",value:function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null}},{key:"set",value:function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var g="";if(c)switch(c.constructor){case Number:g=c===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toUTCString()}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":""),!0}},{key:"remove",value:function(a,b,c){return this.has(a)?(document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:""),!0):!1}},{key:"has",value:function(a){return a?new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1}},{key:"keys",value:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;b>c;c++)a[c]=decodeURIComponent(a[c]);return a}}]),a}()},{}],4:[function(a,b,c){"use strict";function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.ElementFactory=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./elements/Field.js"),i=a("./elements/NumberField.js"),j=a("./elements/Button.js"),k=a("./elements/Text.js"),l=a("./elements/Spacer.js"),m=a("./elements/ImageElement.js"),n=a("./elements/SingleChoiseField.js"),o=a("./elements/MultipleChoiseField.js"),p=function(){function a(){f(this,a)}return g(a,[{key:"make",value:function(){return{}}}]),a}();c.ElementFactory=function(a){function b(){return f(this,b),d(this,Object.getPrototypeOf(b).call(this))}return e(b,a),g(b,[{key:"make",value:function(a,b){switch(a.type){case"text":return new k.Text(a,b);case"intField":return new i.NumberField(a,b);case"textField":return new h.Field(a,b);case"radioField":return new n.SingleChoiseField(a,b);case"checkboxField":return new o.MultipleChoiseField(a,b);case"int":return new i.NumberField(a,b);case"free":return new h.Field(a,b);case"image":return new m.ImageElement(a,b);case"spacer":return new l.Spacer(a,b);case"field":switch(a.subtype){case"int":return new i.NumberField(a,b);case"1m":return new n.SingleChoiseField(a,b);case"nm":return new o.MultipleChoiseField(a,b);case"free":default:return new h.Field(a,b)}break;case"button":return new j.Button(a,b)}}}]),b}(p)},{"./elements/Button.js":7,"./elements/Field.js":11,"./elements/ImageElement.js":12,"./elements/MultipleChoiseField.js":13,"./elements/NumberField.js":14,"./elements/SingleChoiseField.js":17,"./elements/Spacer.js":18,"./elements/Text.js":19}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.Form=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./ConditionWatcher.js"),g=a("./Cookies.js");c.Form=function(){function a(b,c,e){d(this,a),this.options=e||{},this.domConstructor=b,this.connector=c;var f=c.load();f&&f.then(this.handleSuccess.bind(this),this.handleFail.bind(this))}return e(a,[{key:"processConditionsSettings",value:function(){var a=this.connector.data.settings||{},b=JSON.parse(JSON.stringify(a));return b.showCondition=b.showCondition||{},this.options.instant&&(b.showCondition.instant=!0),this.options.ignoreState&&(b.ignoreState=!0),this.options.ignoreCookie&&(b.ignoreCookie=!0),b.active=this.connector.data.active,b}},{key:"setFrequencyCookie",value:function(a){a&&a&&a.settings&&a.settings.frequency&&g.Cookies.set("__sendsay_forms_"+a.id,a.settings.frequency,a.settings.frequency)}},{key:"setCountCookie",value:function(a){if(a){var b=+g.Cookies.get("__sendsay_forms_count_"+a.id)||0;a&&g.Cookies.set("__sendsay_forms_count_"+a.id,b+1,94608e3)}}},{key:"setSubmitCookie",value:function(a){a&&a&&g.Cookies.set("__sendsay_forms_submit_"+a.id,!0,94608e3)}},{key:"handleSuccess",value:function(){var a=this,b=a.connector.data.id,c=this.processConditionsSettings(),d=new f.ConditionWatcher(c,b);d.watch().then(function(){a.domObj=new a.domConstructor(a.connector.data),a.domObj.activate(a.options),a.domObj.el.addEventListener("sendsay-success",a.handleSubmit.bind(a)),a.setFrequencyCookie(a.connector.data),a.setCountCookie(a.connector.data)},function(){console.log("rejected")})}},{key:"handleFail",value:function(){}},{key:"handleSubmit",value:function(a){if(this.options.fakeSubmit)return this.handleSuccessSubmit();var b=a.detail.extra,c=this.connector.submit(b);c&&c.then(this.handleSuccessSubmit.bind(this),this.handleFailSubmit.bind(this))}},{key:"handleSuccessSubmit",value:function(){this.domObj.showEndDialog(),this.setSubmitCookie(this.connector.data)}},{key:"handleFailSubmit",value:function(){this.domObj.onSubmitFail();var a=this.connector.error;a&&"wrong_member_email"===a.id&&this.domObj.showErrorFor("_member_email","Неверный формат email адреса")}}]),a}()},{"./ConditionWatcher.js":1,"./Cookies.js":3}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.MediaQuery=function(){function a(b,c){d(this,a),this.data=b,this.options=c,this.makeStyle(b)}return e(a,[{key:"makeStyle",value:function(a){var b="",c=this.data.conditions,d=this.data.selectors;b+=this.makeMediaCondition(c)+"{";for(var e in d){var f=d[e];b+=this.makeSelectorRule(e,f)}b+=" }";var g=document.createElement("style");g.type="text/css",g.styleSheet?g.styleSheet.cssText=b:g.appendChild(document.createTextNode(b)),document.head.appendChild(g),this.el=g}},{key:"makeMediaCondition",value:function(a){for(var b="@media ",c=0;c<a.length;c++)b+=" "+(0==c?"":"and")+" "+a[c];return b}},{key:"makeSelectorRule",value:function(a,b){var c=" "+a+" { ";for(var d in b){var e=b[d];c+=" "+d+":"+e+";"}return c+=" } "}}]),a}()},{}],7:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Button=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js");c.Button=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){this.template='<div class = "[%classes%]" style="[%wrapperstyle%]"><input type="button"  value="[%text%]"  style="[%style%]" /></div>',this.baseClass="sendsay-button",this.applicableStyles={"background-color":{param:"backgroundColor"},"border-radius":{param:"borderRadius",postfix:"px"},color:{param:"textColor"},"line-height":{param:"lineHeighFt","default":"normal"}},this.wrapperApplStyles={"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"}}}},{key:"addEvents",value:function(){this.el&&this.el.querySelector("input").addEventListener("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(){this.trigger("sendsay-click")}},{key:"removeEvents",value:function(){this.el&&this.el.querySelector("input").removeEventListener("click",this.handleClick.bind(this))}},{key:"makeStyles",value:function(){var a=h(Object.getPrototypeOf(b.prototype),"makeStyles",this).call(this),c=this.data.appearance||{};return"justify"===c.align&&(a.width="100%"),a}},{key:"makeSettings",value:function(){var a=this.data.content||{},c=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this);return c.text=this.escapeHTML(a.text||"Unknown"),c.wrapperstyle=this.makeWrapperStyle(),c}},{key:"makeWrapperStyle",value:function(){var a={},b=this.data.appearance||{};return"justify"!==b.align&&(a["text-align"]=b.align),a=this.extend(a,this.applyStyles(this.wrapperApplStyles)),this.convertStyles(a)}}]),b}(i.DOMObject)},{"./DOMObject.js":10}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.CheckBox=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js");c.CheckBox=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){this.template='<div class = "[%classes%]" style="[%style%]""><input [%checked%] name="[%qid%]" value="[%value%]" type="checkbox" class="sendsay-checkinput"/>'+(this.data.content.label?'<label for="[%label%]" class = "sendsay-label">[%label%]</label>':"")+"</div>",this.baseClass="sendsay-checkbox",this.handleChange=this.handleChange.bind(this),this.handleClick=this.handleClick.bind(this),this.applicableStyles={color:{param:"textColor"}}}},{key:"build",value:function(){return h(Object.getPrototypeOf(b.prototype),"build",this).call(this)}},{key:"makeSettings",value:function(){var a=this.data.content||{},c=this.data.field||{},d=this.data.appearance||{},e=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this);return e.label=this.escapeHTML(a.label||a.name||""),e.qid=c.qid||c.name||"",e.value=a.value||"",e.checked=a.checked?"checked":"",d.hidden&&(e.classes+=" sendsay-field-hidden"),e}},{key:"addEvents",value:function(){this.el&&(this.el.querySelector("input").addEventListener("change",this.handleChange),this.el.querySelector("label")&&this.el.querySelector("label").addEventListener("click",this.handleClick))}},{key:"removeEvents",value:function(){this.el&&(this.el.querySelector("input").removeEventListener("change",this.handleChange),this.el.querySelector("label")&&this.el.querySelector("label").removeEventListener("click",this.handleClick))}},{key:"handleChange",value:function(a){a.stopPropagation(),this.trigger("sendsay-change",{checked:a.target.checked,value:a.target.value})}},{key:"handleClick",value:function(a){a.stopPropagation();var b=this.el.querySelector("input");b.checked=!b.checked,this.trigger("sendsay-change",{checked:b.checked,value:b.value})}},{key:"makeStyles",value:function(){var a=h(Object.getPrototypeOf(b.prototype),"makeStyles",this).call(this);return a}}]),b}(i.DOMObject)},{"./DOMObject.js":10}],9:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Column=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function k(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:k(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js"),j=(a("./../Cookies.js"),a("./../ElementFactory.js"));c.Column=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){this.data.appearance||{};this.template='<div style = "width:100%; [%wrapperstyle%]"><div class = "[%classes%]" style="[%style%]""></div></div>',this.baseClass="sendsay-column",this.applicableStyles={"background-color":{param:"backgroundColor"},"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"}},this.wrapperApplStyles={flex:{param:"flex"}}}},{key:"build",value:function(){h(Object.getPrototypeOf(b.prototype),"build",this).call(this),this.elements=[];var a=new j.ElementFactory,c=this.el.querySelector(".sendsay-column");if(this.data.elements)for(var d=this.data.elements,e=0;e<d.length;e++){var f=a.make(d[e],this);f&&(this.elements.push(f),c.appendChild(f.el))}return this.el}},{key:"makeSettings",value:function(){var a=(this.data.content||{},h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this));return a.wrapperstyle=this.makeWrapperStyle(),a}},{key:"makeWrapperStyle",value:function(){var a={};this.data.appearance||{};return a=this.extend(a,this.applyStyles(this.wrapperApplStyles)),this.convertStyles(a)}}]),b}(i.DOMObject)},{"./../Cookies.js":3,"./../ElementFactory.js":4,"./DOMObject.js":10}],10:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.DOMObject=function(){function a(b,c){d(this,a),this.data=b,this.parent=c||null,c&&c.general&&(this.general=this.extend({},c.general)),this.initialize(),this.render()}return e(a,[{key:"escapeHTML",value:function(a){var b=document.createElement("textarea");return b.textContent=a,b.innerHTML}},{key:"initialize",value:function(){this.template="<div></div>",this.baseClass="sendsay-main",this.applicableStyles={}}},{key:"makeElement",value:function(){var a=document.createElement("div"),b=this.applySettings(this.makeSettings());return a.innerHTML=b,a.firstChild}},{key:"makeSettings",value:function(){var a=(this.data,{classes:this.makeClasses(),style:this.convertStyles(this.makeStyles())});return a}},{key:"makeStyles",value:function(){var a=this.applyStyles(this.applicableStyles);return a}},{key:"applyStyles",value:function(a){var b={},c=this.data.appearance||{},d=this.general&&this.general.appearance||{};for(var e in a){var f=a[e];void 0!==c[f.param]||void 0!=d[f.param]?b[e]=(c[f.param]||d[f.param])+(f.postfix?f.postfix:""):f["default"]&&(b[e]=f["default"])}return b}},{key:"convertStyles",value:function(a){var b=a,c="";for(var d in b)c+=" "+d+":"+b[d]+";";return c}},{key:"makeClasses",value:function(){return this.baseClass}},{key:"applySettings",value:function(a){a=a||{};for(var b=this.template,c=b.match(new RegExp("\\[% *[a-zA-Z0-9\\-]* *%\\]","g"))||[],d=0;d<c.length;d++){var e=c[d];e=e.substring(2,e.length-2);var f=a[e.trim()]||"";b=b.replace(new RegExp("\\[%"+e+"%\\]","g"),f)}return b}},{key:"build",value:function(){return this.el=this.makeElement(),this.el.core=this,this.el}},{key:"render",value:function(){var a=this.el;this.removeEvents(),this.build(),this.addEvents(),a&&a.parentNode&&a.parentNode.replaceChild(this.el,a)}},{key:"addEvents",value:function(){}},{key:"removeEvents",value:function(){}},{key:"trigger",value:function(a,b){var c=void 0,d={extra:b};CustomEvent&&"function"==typeof CustomEvent?c=new CustomEvent(a,{detail:d}):(c=document.createEvent("HTMLEvents"),c.initEvent(a,!0,!0),c.detail=d),this.el.dispatchEvent(c)}},{key:"extend",value:function(a,b){a=a||{},b=b||{};for(var c in b)a[c]instanceof Object&&b[c]instanceof Object?a[c]=this.extend(a[c],b[c]):a[c]=b[c];return a}}]),a}()},{}],11:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Field=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js");c.Field=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){this.template='<div class = "[%classes%]" style="[%style%]""><label for="[%label%]" class = "sendsay-label">[%label%]</label><input name="[%qid%]" placeholder="[%placeholder%]" value="[%value%]" type="text" class="sendsay-input"/><div type="text" class="sendsay-error"></div></div>',this.baseClass="sendsay-field",this.applicableStyles={"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},color:{param:"textColor"}}}},{key:"makeSettings",value:function(){var a=this.data.field||{},c=this.data.content||{},d=this.data.appearance||{},e=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this);return e.label=this.escapeHTML(c.label||""),e.placeholder=this.escapeHTML(c.placeholder||""),e.qid=a.id||a.qid||"",e.value=a["default"]||"",d.hidden&&(e.classes+=" sendsay-field-hidden"),a.required&&(e.label+="*"),e}},{key:"validate",value:function(){return this.removeErrorMessage(),this.data.field.required&&""==this.getValue()?(this.showErrorMessage("Обязательное поле"),!1):!0}},{key:"showErrorMessage",value:function(a){this.el.classList.add("sendsay-field-invalid"),this.el.querySelector(".sendsay-error").innerHTML=a}},{key:"removeErrorMessage",value:function(){this.el.classList.remove("sendsay-field-invalid"),this.el.querySelector(".sendsay-error").innerHTML=""}},{key:"getValue",value:function(){return this.el.querySelector("input").value}}]),b}(i.DOMObject)},{"./DOMObject.js":10}],12:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.ImageElement=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js");c.ImageElement=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){this.template='<div class = "[%classes%]" style="[%wrapperstyle%]"><img src="[%url%]" style="[%style%]/>" /></div>',this.wrapperApplStyles={"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"}},this.baseClass="sendsay-image"}},{key:"makeStyles",value:function(){var a=h(Object.getPrototypeOf(b.prototype),"makeStyles",this).call(this),c=this.data.appearance||{};return c.extended?a.width="100%":a["max-width"]="100%",a}},{key:"makeSettings",value:function(){var a=this.data.content||{},c=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this);return c.wrapperstyle=this.makeWrapperStyle(),c.url=a.url,c}},{key:"makeWrapperStyle",value:function(){var a={},b=this.data.appearance||{};return a["text-align"]=b.align,a=this.extend(a,this.applyStyles(this.wrapperApplStyles)),this.convertStyles(a)}}]),b}(i.DOMObject)},{"./DOMObject.js":10}],13:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.MultipleChoiseField=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function k(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:k(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./Field.js"),j=a("./CheckBox.js");c.MultipleChoiseField=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){h(Object.getPrototypeOf(b.prototype),"initialize",this).call(this),this.template='<div class = "[%classes%]" style="[%style%]""><label for="[%label%]" class = "sendsay-label">[%label%]</label><div class = "sendsay-container"></div><div type="text" class="sendsay-error"></div></div>',
this.curValues=this.data.field["default"]||[],this.baseClass="sendsay-field",this.handleChangeValue=this.handleChangeValue.bind(this)}},{key:"build",value:function(){h(Object.getPrototypeOf(b.prototype),"build",this).call(this),this.elements=[];var a=this.el.querySelector(".sendsay-container"),c=this.data.field||{};if(this.data.field.answers){var d=c.answers;for(var e in d){var f=new j.CheckBox({field:{qid:c.id||c.qid||""},content:{label:d[e],value:e,checked:-1!==this.curValues.indexOf(e)}},this);f&&(f.el.addEventListener("sendsay-change",this.handleChangeValue),this.elements.push(f),a.appendChild(f.el))}}return this.el}},{key:"handleChangeValue",value:function(a){var b=a.detail.extra;b.checked?-1===this.curValues.indexOf(b.value)&&this.curValues.push(b.value):-1!==this.curValues.indexOf(b.value)&&this.curValues.splice(this.curValues.indexOf(b.value),1)}},{key:"getValue",value:function(){return this.curValues}},{key:"validate",value:function(){return this.removeErrorMessage(),this.data.field.required&&0==this.getValue().length?(this.showErrorMessage("Обязательное поле"),!1):!0}}]),b}(i.Field)},{"./CheckBox.js":8,"./Field.js":11}],14:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.NumberField=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./Field.js");c.NumberField=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"validate",value:function(){var a=h(Object.getPrototypeOf(b.prototype),"validate",this).call(this);if(a){var c=this.getValue();a=!c.match(/[\.xXeE]/)&&!isNaN(+c),a||this.showErrorMessage("Неверный формат целого числа")}return a}}]),b}(i.Field)},{"./Field.js":11}],15:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Popup=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function n(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:n(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js"),j=(a("./../Cookies.js"),a("./../MediaQuery.js")),k=(a("./../ElementFactory.js"),a("./Column.js")),l=a("./Field.js"),m=a("./Button.js");c.Popup=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){var a=this.data.appearance||{};this.noWrapper=!1,this.template=(this.noWrapper?"":'<div class = "sendsay-wrapper [%wrapperClasses%]">')+'<div class = "[%classes%]" style="[%style%]""><div class = "sendsay-close">×</div></div>'+(this.noWrapper?"":"</div>"),this.baseClass="sendsay-popup",this.applicableStyles={"background-color":{param:"backgroundColor"},"border-radius":{param:"borderRadius",postfix:"px"},"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},width:{param:"width",postfix:"px"},color:{param:"textColor"}};var b=this.data.appearance.width,c=new j.MediaQuery({conditions:["screen","(min-width: 320px)","(max-width:"+(+b+100)+"px)"],selectors:{".sendsay-popup":{width:"300px !important","-webkit-flex-direction":"column","-ms-flex-direction":"column","flex-direction":"column",animation:"none"},".sendsay-popup.sendsay-left":{top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"none"},".sendsay-popup.sendsay-right":{top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"none"}}});this.mediaQuery=c,a.position=a.position||"centered",this.general={},this.general.appearance={},this.general.appearance.textColor=this.data.appearance.textColor,this.makeEndDialogData()}},{key:"build",value:function(){h(Object.getPrototypeOf(b.prototype),"build",this).call(this),this.columns=[];var a=this.el.classList.contains("sendsay-popup")?this.el:this.el.querySelector(".sendsay-popup");if(this.data.columns)for(var c=this.data.columns,d=0;d<c.length;d++){var e=new k.Column(c[d],this);e&&(this.columns.push(e),a.appendChild(e.el))}if(this.demo||this.container){var f=this.el.querySelector(".sendsay-popup");this.el.style.position="absolute",f&&(f.style.position="absolute")}return this.el}},{key:"addEvents",value:function(){var a=this;if(this.el){this.el.addEventListener("DOMNodeRemovedFromDocument",function(){a.mediaQuery&&document.head.removeChild(a.mediaQuery.el)});var b=this.el.classList.contains("sendsay-popup")?this.el:this.el.querySelector(".sendsay-popup");this.noWrapper||this.el.addEventListener("click",this.handleWrapperClick.bind(this)),console.log("test",this.el),this.el.querySelector(".sendsay-button").addEventListener("sendsay-click",this.handleButtonClick.bind(this)),this.el.addEventListener("wheel",this.handleWheel.bind(this)),this.el.addEventListener("DOMMouseScroll",this.handleWheel.bind(this)),b.addEventListener("click",this.handlePopupClick.bind(this)),this.el.querySelector(".sendsay-close").addEventListener("click",this.handleClose.bind(this)),document.addEventListener("keyup",this.handleKeyPress.bind(this))}}},{key:"removeEvents",value:function(){if(this.el){var a=this.el.classList.contains("sendsay-popup")?this.el:this.el.querySelector(".sendsay-popup");this.noWrapper||this.el.removeEventListener("click",this.handleWrapperClick.bind(this)),this.el.removeEventListener("wheel",this.handleWheel.bind(this)),this.el.removeEventListener("DOMMouseScroll",this.handleWheel.bind(this)),this.el.removeEventListener("wheel",this.handleWheel.bind(this)),a.removeEventListener("click",this.handlePopupClick.bind(this)),document.removeEventListener("keyup",this.handleKeyPress.bind(this))}}},{key:"makeSettings",value:function(){var a=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this);return a.wrapperClasses=this.data.noAnimation?"sendsay-noanimation":"",a}},{key:"makeClasses",value:function(){var a=this.data.appearance||{},c=h(Object.getPrototypeOf(b.prototype),"makeClasses",this).call(this);return c+=this.data.endDialog?" sendsay-enddialog":"",c+=" sendsay-animation-"+(a.animation||"none"),c+=" sendsay-"+(a.position||"center")}},{key:"activate",value:function(a){this.demo=a&&a.demo,this.container=a&&a.el,this.ignoreKeyboard=a&&a.ignoreKeyboard,this.show(a)}},{key:"searchForElements",value:function(a,b){var c=[];if(!a||"function"!=typeof a)return c;for(var d=b?this.data.columns:this.columns,e=0;e<d.length;e++)for(var f=d[e],g=f.elements,h=0;h<g.length;h++)a(g[h])&&c.push(g[h]);return c}},{key:"makeEndDialogData",value:function(){var a=this.data;this.submitData=this.extend({noAnimation:!0,endDialog:!0},a),console.log(this.submitData,this.data),delete this.submitData.elements;var b=void 0,c=this.searchForElements(function(a){return"button"==a.type},!0);b=c[0]?this.extend({},c[0]):{type:"button",content:{}},b.content={text:"Закрыть"},this.submitData.columns=[{elements:[{type:"text",content:{text:a.endDialogMessage||"Спасибо за заполнение формы"},appearance:{paddingTop:"10",paddingBottom:"20"}},b],appearance:{}}]}},{key:"showEndDialog",value:function(){this.isSubmitted=!0,this.data=this.submitData,this.render()}},{key:"onSubmitFail",value:function(){}},{key:"show",value:function(a){this.container?(this.el.style.position="absolute",this.noWrapper||(this.el.querySelector(".sendsay-popup").style.position="absolute"),this.container.appendChild(this.el)):document.querySelector("body").appendChild(this.el)}},{key:"hide",value:function(){this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},{key:"submit",value:function(){var a=this.searchForElements(function(a){return a instanceof l.Field||a instanceof m.Button}),b=!0,c={},d=void 0;if(a)for(var e=0;e<a.length;e++){var f=a[e];f instanceof l.Field&&(c[f.data.field.id||f.data.field.qid]=f.getValue(),b=f.validate()&&b),f instanceof m.Button&&(d=f)}return b&&(d.el.querySelector("input").classList.add("sendsay-loading"),this.trigger("sendsay-success",c)),b}},{key:"onSubmitFail",value:function(){var a=this.searchForElements(function(a){return a instanceof m.Button});a[0]&&a[0].el.querySelector("input").classList.remove("sendsay-loading")}},{key:"showErrorFor",value:function(a,b){for(var c=this.searchForElements(function(a){return a instanceof l.Field}),d=0;d<c.length;d++){var e=c[d];!e.data.field||e.data.field.qid!=a&&e.data.field.id!=a||e.showErrorMessage(b)}}},{key:"handleWrapperClick",value:function(){}},{key:"handleWheel",value:function(a){var b=Math.sign(a.wheelDelta);if(a.target.classList.contains("sendsay-wrapper"))a.preventDefault();else{var c=this.noWrapper?this.el:this.el.querySelector(".sendsay-popup");(-1==b&&c.clientHeight+c.scrollTop==c.scrollHeight||1==b&&0==c.scrollTop)&&a.preventDefault()}return!1}},{key:"handlePopupClick",value:function(a){a.stopPropagation()}},{key:"handleButtonClick",value:function(a){this.isSubmitted?this.hide():this.submit()&&this.demo&&this.showEndDialog()}},{key:"handleKeyPress",value:function(a){if(this.ignoreKeyboard)switch(a.keyCode){case 13:this.isSubmitted?this.hide():this.submit()&&this.demo&&this.showEndDialog();break;case 27:this.hide()}}},{key:"handleClose",value:function(a){this.hide()}}]),b}(i.DOMObject)},{"./../Cookies.js":3,"./../ElementFactory.js":4,"./../MediaQuery.js":6,"./Button.js":7,"./Column.js":9,"./DOMObject.js":10,"./Field.js":11}],16:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.RadioButton=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js");c.RadioButton=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){this.template='<div class = "[%classes%]" style="[%style%]"><input [%checked%] name="[%qid%]" value="[%value%]" type="radio" class="sendsay-radioinput"/>'+(this.data.content.label?'<label for="[%qid%]" class = "sendsay-label">[%label%]</label>':"")+"</div>",this.baseClass="sendsay-radio",this.handleChange=this.handleChange.bind(this),this.handleClick=this.handleClick.bind(this),this.applicableStyles={color:{param:"textColor"}}}},{key:"build",value:function(){return h(Object.getPrototypeOf(b.prototype),"build",this).call(this)}},{key:"makeSettings",value:function(){var a=this.data,c=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this),d=a.content||{},e=a.field||{},f=a.appearance||{};return c.label=this.escapeHTML(d.label||""),c.qid=e.qid||"",c.value=d.value||"",c.checked=d.checked?"checked":"",f.hidden&&(c.classes+=" sendsay-field-hidden"),c}},{key:"addEvents",value:function(){this.el&&(this.el.querySelector("input").addEventListener("change",this.handleChange),this.data.content.label&&this.el.querySelector("label").addEventListener("click",this.handleClick))}},{key:"removeEvents",value:function(){this.el&&(this.el.querySelector("input").removeEventListener("change",this.handleChange),this.data.content.label&&this.el.querySelector("label").removeEventListener("click",this.handleClick))}},{key:"handleChange",value:function(a){a.stopPropagation(),this.trigger("sendsay-change",{checked:a.target.checked,value:a.target.value})}},{key:"handleClick",value:function(a){a.stopPropagation();var b=this.el.querySelector("input");b.checked=!0,this.trigger("sendsay-change",{checked:b.checked,value:b.value})}}]),b}(i.DOMObject)},{"./DOMObject.js":10}],17:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.SingleChoiseField=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function k(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:k(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./Field.js"),j=a("./RadioButton.js");c.SingleChoiseField=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){h(Object.getPrototypeOf(b.prototype),"initialize",this).call(this),this.template='<div class = "[%classes%]" style="[%style%]""><label for="[%label%]" class = "sendsay-label">[%label%]</label><div class = "sendsay-container"></div><div type="text" class="sendsay-error"></div></div>';var a=this.data.field||{};this.curValue=a["default"]||"",this.baseClass="sendsay-field",this.handleChangeValue=this.handleChangeValue.bind(this)}},{key:"build",value:function(){h(Object.getPrototypeOf(b.prototype),"build",this).call(this),this.elements=[];var a=this.data.field||{},c=this.el.querySelector(".sendsay-container");if(a.answers){var d=a.answers;for(var e in d){var f=new j.RadioButton({field:{qid:a.id||a.qid||""},content:{label:d[e],value:e,checked:e===this.curValue}},this);f&&(f.el.addEventListener("sendsay-change",this.handleChangeValue),this.elements.push(f),c.appendChild(f.el))}}return this.el}},{key:"handleChangeValue",value:function(a){var b=a.detail.extra;this.curValue=b.value}},{key:"getValue",value:function(){return this.curValue}}]),b}(i.Field)},{"./Field.js":11,"./RadioButton.js":16}],18:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Spacer=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./DOMObject.js");c.Spacer=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){this.template='<div class = "[%classes%]" style="[%style%]"></div>',this.baseClass="sendsay-spacer",this.applicableStyles={height:{param:"height",postfix:"px"}}}}]),b}(h.DOMObject)},{"./DOMObject.js":10}],19:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Text=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js");c.Text=function(a){function b(a,c){return d(this,b),e(this,Object.getPrototypeOf(b).call(this,a,c))}return f(b,a),g(b,[{key:"initialize",value:function(){this.template='<div class = "sendsay-text" style="[%style%]"">[%text%]</div>',this.baseClass="sendsay-text",this.applicableStyles={"text-align":{param:"align","default":"left"},"line-height":{param:"lineHeight","default":"normal"},"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},color:{param:"textColor"}}}},{key:"build",value:function(){return h(Object.getPrototypeOf(b.prototype),"build",this).call(this)}},{key:"makeSettings",value:function(){var a=this.data.content||{},c=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this);return c.text=a.text||"",c}}]),b}(i.DOMObject)},{"./DOMObject.js":10}],20:[function(a,b,c){"use strict";var d=a("./classes/elements/Popup.js"),e=a("./classes/Connector.js"),f=a("./classes/Form.js");!function(){var a=function(a,b){c(function(){var c=new e.Connector(a);new f.Form(d.Popup,c,b)})},b=function(a,b){var c=new d.Popup(a);c.activate(b)},c=function(a){var b="_sendsay-styles";if(!document.getElementById(b)){var c=document.getElementsByTagName("head")[0],d=document.createElement("link");d.id=b,d.rel="stylesheet",d.type="text/css",d.href="https://dl.dropbox.com/s/hq9cw3paj4tcube/sendsayforms.css",d.media="all",c.appendChild(d),d.addEventListener("load",a)}};window.SENDSAY={activatePopup:a,showPopup:b}}()},{"./classes/Connector.js":2,"./classes/Form.js":5,"./classes/elements/Popup.js":15}]},{},[20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]);