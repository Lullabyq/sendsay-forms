!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Button=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js");c.Button=function(a){function b(a,c){d(this,b);var f=e(this,Object.getPrototypeOf(b).call(this,a,c));return f.template='<div class = "[%classes%]" style="[%wrapperstyle%]"><input type="button"  value="[%text%]"  style="[%style%]" /></div>',f.baseClass="sendsay-button",f.applicableStyles={"background-color":{param:"backgroundColor"},"border-radius":{param:"borderRadius",postfix:"px"},color:{param:"textColor"},"line-height":{param:"lineHeight","default":"normal"}},f.build(),f}return f(b,a),g(b,[{key:"build",value:function(){return h(Object.getPrototypeOf(b.prototype),"build",this).call(this)}},{key:"makeStyles",value:function(){var a=h(Object.getPrototypeOf(b.prototype),"makeStyles",this).call(this),c=this.data;return"justify"===c.align&&(a.width="100%"),a}},{key:"makeSettings",value:function(){var a=this.data,c=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this);return c.text=a.text||"Unknown",c.wrapperstyle=this.makeWrapperStyle(),c}},{key:"makeWrapperStyle",value:function(){var a={},b=this.data;return"justify"!==b.align&&(a["text-align"]=b.align),this.convertStyles(a)}}]),b}(i.DOMObject)},{"./DOMObject.js":2}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.DOMObject=function(){function a(b,c){d(this,a),this.data=b,this.template="<div></div>",this.baseClass="sendsay-main",this.parent=c||null,this.applicableStyles={}}return e(a,[{key:"makeElement",value:function(){var a=document.createElement("div"),b=this.applySettings(this.makeSettings());return a.innerHTML=b,a.firstChild}},{key:"makeSettings",value:function(){var a=(this.data,{classes:this.makeClasses(),style:this.convertStyles(this.makeStyles())});return a}},{key:"makeStyles",value:function(){var a=this.applyStyles(this.applicableStyles);return a}},{key:"applyStyles",value:function(a){var b={},c=this.data;for(var d in a){var e=a[d];void 0!==c[e.param]?b[d]=c[e.param]+(e.postfix?e.postfix:""):e["default"]&&(b[d]=e["default"])}return b}},{key:"convertStyles",value:function(a){var b=a,c="";for(var d in b)c+=" "+d+":"+b[d]+";";return c}},{key:"makeClasses",value:function(){return this.baseClass}},{key:"applySettings",value:function(a){var b=this.template;for(var c in a)b=b.replace(new RegExp("\\[%"+c+"%\\]","g"),a[c]);return b}},{key:"build",value:function(){return this.el=this.makeElement(),this.el.core=this,this.el}},{key:"rerender",value:function(){var a=this.el;this.removeEvents(),a.parentNode&&a.parentNode.replaceChild(this.build(),a),this.addEvents()}},{key:"addEvents",value:function(){}},{key:"removeEvents",value:function(){}}]),a}()},{}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Field=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js");c.Field=function(a){function b(a,c){d(this,b);var f=e(this,Object.getPrototypeOf(b).call(this,a,c));return f.template='<div class = "[%classes%]" style="[%style%]""><label for="[%name%]" class = "sendsay-label">[%label%]</label><input name="[%name%]" placeholder=[%placeholder%] type="text" class="sendsay-input"/><div type="text" class="sendsay-error"></div></div>',f.baseClass="sendsay-field",f.build(),f}return f(b,a),g(b,[{key:"build",value:function(){return h(Object.getPrototypeOf(b.prototype),"build",this).call(this)}},{key:"makeSettings",value:function(){var a=this.data,c=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this);return c.name=a.name||"",c.label=a.label||a.name||"",c.placeholder=a.placeholder||"",a.hidden&&(c.classes+=" sendsay-field-hidden"),a.required&&(c.label+="*"),c}},{key:"makeStyles",value:function(){var a=h(Object.getPrototypeOf(b.prototype),"makeStyles",this).call(this);this.data;return this.parent&&this.parent.data&&this.parent.data.textColor&&(a.color=this.parent.data.textColor),a}},{key:"validate",value:function(){return this.data.required&&""==this.el.querySelector("input").value.trim()?(this.el.classList.add("sendsay-field-invalid"),this.el.querySelector(".sendsay-error").innerHTML="Обязательное поле",!1):!0}}]),b}(i.DOMObject)},{"./DOMObject.js":2}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.Loader=function(){function a(b){d(this,a),this.request=new XMLHttpRequest,this.request.open("POST","https://sendsay.ru/form/x_1445438168224221/2/",!0),this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var c='{"id":'+b+" }";this.params="apiversion="+encodeURIComponent(100)+"&json=1&request="+encodeURIComponent(c)}return e(a,[{key:"stateWatcher",value:function(){}},{key:"handleSuccess",value:function(){var a='{"fields": {"q43": {"type": "free","name": "First field","questionnaire": "SomeQuest"},"q46": {"type": "free","name": "Second field","questionnaire": "SomeQuest"},"q48": {"type": "number","name": "Third field","questionnaire": "SomeQuest"}},"name": "Important form","active": true}',b=JSON.parse(a);this.transformAnswer(b),console.log("success")}},{key:"transformAnswer",value:function(a){if(this.data={},this.data.elements=[],this.data.active=a.active||!1,a.fields){var b=a.fields;for(var c in b){var d=b[c];this.data.elements.push({type:d.type,name:"_"+d.questionnaire+"_"+c,label:d.name})}this.data.elements.push({type:"button",text:"submit"})}a.name&&(this.data.title=a.name)}},{key:"handleFail",value:function(){console.log("fail")}},{key:"load",value:function(){return new Promise(this.promiseHandler.bind(this))}},{key:"promiseHandler",value:function(a,b){var c=this;this.request.onreadystatechange=function(){4==c.request.readyState&&(200==c.request.status?(c.handleSuccess(),a(this.data)):(c.handleSuccess(),a(this.data)))},console.log(this.params),this.request.send(this.params)}}]),a}()},{}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Popup=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function o(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:o(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js"),j=a("./Field.js"),k=a("./Button.js"),l=a("./Text.js"),m=(c.Popup=function(a){function b(a,c){d(this,b);var f=e(this,Object.getPrototypeOf(b).call(this,a,c));return f.template='<div class = "sendsay-wrapper"><div class = "[%classes%]" style="[%style%]""></div></div>',f.baseClass="sendsay-popup",f.applicableStyles={"background-color":{param:"backgroundColor"},"border-radius":{param:"borderRadius",postfix:"px"},"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"}},a.active&&f.build(),f}return f(b,a),g(b,[{key:"build",value:function(){if(!this.data.active)return!1;h(Object.getPrototypeOf(b.prototype),"build",this).call(this),this.elements=[];var a=new n,c=this.el.querySelector(".sendsay-popup");if(this.data.elements)for(var d=this.data.elements,e=0;e<d.length;e++){var f=a.make(d[e],this);f&&(this.elements.push(f),c.appendChild(f.el))}return this.el}},{key:"activate",value:function(a){this.data.active&&(a&&a.instant?this.show(a):setTimeout(this.show.bind(this,a),this.data.displaySettings&&this.data.displaySettings.delay||1e3))}},{key:"addEvents",value:function(){this.el.addEventListener("click",this.handleWrapperClick.bind(this)),this.el.querySelector(".sendsay-popup").addEventListener("click",this.handlePopupClick.bind(this)),this.el.querySelector(".sendsay-button input").addEventListener("click",this.handleSubmit.bind(this)),document.addEventListener("keyup",this.handleKeyPress.bind(this))}},{key:"removeEvents",value:function(){this.el.removeEventListener("click",this.handleWrapperClick.bind(this)),this.el.querySelector(".sendsay-popup").removeEventListener("click",this.handlePopupClick.bind(this)),this.el.querySelector(".sendsay-button input").removeEventListener("click",this.handleSubmit.bind(this)),document.removeEventListener("keyup",this.handleKeyPress.bind(this))}},{key:"handleWrapperClick",value:function(){this.hide()}},{key:"handlePopupClick",value:function(a){a.stopPropagation()}},{key:"handleSubmit",value:function(a){this.submit()}},{key:"handleKeyPress",value:function(a){switch(a.keyCode){case 13:this.submit();break;case 27:this.hide()}}},{key:"show",value:function(a){this.build(),this.addEvents(),a&&a.el?(this.el.style.position="absolute",a.el.appendChild(this.el)):document.querySelector("body").appendChild(this.el)}},{key:"hide",value:function(){this.removeEvents(),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},{key:"submit",value:function(){var a=this.elements,b=!0;if(a)for(var c=1;c<a.length;c++){var d=a[c];d instanceof j.Field&&(b=b&&d.validate())}b&&(console.log("submitted"),this.hide())}}]),b}(i.DOMObject),function(){function a(){d(this,a)}return g(a,[{key:"make",value:function(){return{}}}]),a}()),n=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).call(this))}return f(b,a),g(b,[{key:"make",value:function(a,b){switch(a.type){case"text":return new l.Text(a,b);case"number":case"free":case"field":return new j.Field(a,b);case"button":return new k.Button(a,b)}}}]),b}(m)},{"./Button.js":1,"./DOMObject.js":2,"./Field.js":3,"./Text.js":6}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Text=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./DOMObject.js");c.Text=function(a){function b(a,c){d(this,b);var f=e(this,Object.getPrototypeOf(b).call(this,a,c));return f.template='<div class = "sendsay-text" style="[%style%]"">[%text%]</div>',f.baseClass="sendsay-text",f.build(),f}return f(b,a),g(b,[{key:"build",value:function(){return h(Object.getPrototypeOf(b.prototype),"build",this).call(this)}},{key:"makeSettings",value:function(){var a=this.data,c=h(Object.getPrototypeOf(b.prototype),"makeSettings",this).call(this);return c.text=a.text||"",c}},{key:"makeStyles",value:function(){var a=h(Object.getPrototypeOf(b.prototype),"makeStyles",this).call(this);this.data;return this.parent&&this.parent.data&&this.parent.data.textColor&&(a.color=this.parent.data.textColor),a}}]),b}(i.DOMObject)},{"./DOMObject.js":2}],7:[function(a,b,c){"use strict";var d=a("./classes/Popup.js"),e=a("./classes/Loader.js");!function(){var a=function(a,b){var c=new e.Loader("p10");c.load().then(function(a){var e=new d.Popup(c.data);e.activate(b)})},b=function(a,b){var c=new d.Popup(a);c.activate(b)};window.SENDSAY={activatePopup:a,showPopup:b}}()},{"./classes/Loader.js":4,"./classes/Popup.js":5}]},{},[7,1,2,3,4,5,6]);