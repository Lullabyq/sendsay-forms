!function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){function d(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],2:[function(a,b,c){function d(a){if(Array.isArray(a))return a}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],3:[function(a,b,c){function d(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],4:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],5:[function(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function e(a,b,c){return b&&d(a.prototype,b),c&&d(a,c),a}b.exports=e,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],6:[function(a,b,c){function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],7:[function(a,b,c){function d(a,c,f){return"undefined"!=typeof Reflect&&Reflect.get?(b.exports=d=Reflect.get,b.exports["default"]=b.exports,b.exports.__esModule=!0):(b.exports=d=function(a,b,c){var d=e(a,b);if(d){var f=Object.getOwnPropertyDescriptor(d,b);return f.get?f.get.call(c):f.value}},b.exports["default"]=b.exports,b.exports.__esModule=!0),d(a,c,f||a)}var e=a("./superPropBase.js");b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{"./superPropBase.js":16}],8:[function(a,b,c){function d(a){return b.exports=d=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},b.exports["default"]=b.exports,b.exports.__esModule=!0,d(a)}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],9:[function(a,b,c){function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&e(a,b)}var e=a("./setPrototypeOf.js");b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{"./setPrototypeOf.js":14}],10:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],11:[function(a,b,c){function d(a,b){var c=a&&("undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"]);if(null!=c){var d,e,f=[],g=!0,h=!1;try{for(c=c.call(a);!(g=(d=c.next()).done)&&(f.push(d.value),!b||f.length!==b);g=!0);}catch(i){h=!0,e=i}finally{try{g||null==c["return"]||c["return"]()}finally{if(h)throw e}}return f}}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],12:[function(a,b,c){function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],13:[function(a,b,c){function d(a,b){return!b||"object"!==e(b)&&"function"!=typeof b?f(a):b}var e=a("@babel/runtime/helpers/typeof")["default"],f=a("./assertThisInitialized.js");b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{"./assertThisInitialized.js":3,"@babel/runtime/helpers/typeof":17}],14:[function(a,b,c){function d(a,c){return b.exports=d=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},b.exports["default"]=b.exports,b.exports.__esModule=!0,d(a,c)}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],15:[function(a,b,c){function d(a,b){return e(a)||f(a,b)||g(a,b)||h()}var e=a("./arrayWithHoles.js"),f=a("./iterableToArrayLimit.js"),g=a("./unsupportedIterableToArray.js"),h=a("./nonIterableRest.js");b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{"./arrayWithHoles.js":2,"./iterableToArrayLimit.js":11,"./nonIterableRest.js":12,"./unsupportedIterableToArray.js":18}],16:[function(a,b,c){function d(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=e(a),null!==a););return a}var e=a("./getPrototypeOf.js");b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{"./getPrototypeOf.js":8}],17:[function(a,b,c){function d(a){"@babel/helpers - typeof";return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(b.exports=d=function(a){return typeof a},b.exports["default"]=b.exports,b.exports.__esModule=!0):(b.exports=d=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b.exports["default"]=b.exports,b.exports.__esModule=!0),d(a)}b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{}],18:[function(a,b,c){function d(a,b){if(a){if("string"==typeof a)return e(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?e(a,b):void 0}}var e=a("./arrayLikeToArray.js");b.exports=d,b.exports["default"]=b.exports,b.exports.__esModule=!0},{"./arrayLikeToArray.js":1}],19:[function(a,b,c){"use strict";var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=void 0;var e=d(a("@babel/runtime/helpers/classCallCheck")),f=d(a("@babel/runtime/helpers/createClass")),g=a("./attributes"),h=function(){function a(){(0,e["default"])(this,a),this.attributes=[g.ATTRIBUTES.SUBSCRIBE]}return(0,f["default"])(a,[{key:"watch",value:function(a){document.addEventListener("click",function(b){var c=b.target.getAttribute(g.ATTRIBUTES.SUBSCRIBE);c&&a(c)})}}]),a}();c["default"]=h},{"./attributes":28,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10}],20:[function(a,b,c){"use strict";var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.ConditionWatcher=void 0;var e=d(a("@babel/runtime/helpers/classCallCheck")),f=d(a("@babel/runtime/helpers/createClass")),g=a("./Cookies"),h=a("../utils"),i=d(a("./ClickTrigger")),j=function(){function a(b,c){var d=c.id,f=c.formId,g=c.login;(0,e["default"])(this,a),this.globCond=b;var i=this.conditions=b.showCondition;this.id=d,this.login=g,this.formId=f,this.instant=void 0==i.instant||i.instant,this.pageScroll=(0,h.toNumber)(i.onPageScroll),this.onLeave=i.onLeave||!1,this.delay=(0,h.toNumber)(i.delay),this.active=b.active,this.leaveWatcher=this.leaveWatcher.bind(this),this.scrollWatcher=this.scrollWatcher.bind(this)}return(0,f["default"])(a,[{key:"watch",value:function(a,b){var c=this;if(this.resolve=a,this.reject=b,this.isDone=!1,this.active){var d=new i["default"];if(d.watch(function(b){b==="".concat(c.login,"/").concat(c.formId)&&a("click")}),this.isRejectByCookie())return void b();if(this.instant)return void a("instant");if(!this.pageScroll||(document.addEventListener("scroll",this.scrollWatcher),this.scrollWatcher(),!this.isDone)){if(this.onLeave){document.body?document.body.addEventListener("mouseleave",this.leaveWatcher):document.addEventListener("mouseleave",this.leaveWatcher);var e=this.id;h.LeaveCounter.increment(e),window.onbeforeunload=function(){h.LeaveCounter.decrement(e)}}this.delay&&(this.timeoutID=setTimeout(this.delayWatcher.bind(this),1e3*this.delay))}}}},{key:"isRejectByCookie",value:function(){if(this.globCond.ignoreCookie)return!1;if(g.Cookies.has("__sendsay_forms_".concat(this.id))){if(g.Cookies.get("__sendsay_forms_".concat(this.id))===this.globCond.frequency)return!0;if(this.globCond.frequency)return g.Cookies.set("__sendsay_forms_".concat(this.id),this.globCond.frequency,this.globCond.frequency,"/",(0,h.getHostName)()),!0;g.Cookies.remove("__sendsay_forms_".concat(this.id))}return!(void 0==this.conditions.multipleSubmit||this.conditions.multipleSubmit||!g.Cookies.has("__sendsay_forms_submit_".concat(this.id)))||!!(this.conditions.maxCount&&g.Cookies.has("__sendsay_forms_count_".concat(this.id))&&+g.Cookies.get("__sendsay_forms_count_".concat(this.id))>=+this.conditions.maxCount)}},{key:"scrollWatcher",value:function(){var a=document.documentElement.scrollTop||window.pageYOffset,b=document.documentElement.scrollHeight-document.documentElement.clientHeight,c=this.pageScroll;(b<=0||c<=a/b*100)&&this.satisfyCondition("scroll")}},{key:"leaveWatcher",value:function(){var a=h.LeaveCounter.get(this.id);(!a||(0,h.toNumber)(a)<2)&&this.satisfyCondition("leave")}},{key:"removeLeaveWatcher",value:function(){document.body?document.body.removeEventListener("mouseleave",this.leaveWatcher):document.removeEventListener("mouseleave",this.leaveWatcher)}},{key:"delayWatcher",value:function(){this.satisfyCondition("delay")}},{key:"satisfyCondition",value:function(a){this.isDone=!0,this.stopWatch(),this.resolve(a)}},{key:"stopWatch",value:function(){document.removeEventListener("scroll",this.scrollWatcher),this.removeLeaveWatcher(),this.timeoutID&&clearTimeout(this.timeoutID)}}]),a}();c.ConditionWatcher=j},{"../utils":54,"./ClickTrigger":19,"./Cookies":22,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10}],21:[function(a,b,c){"use strict";var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Connector=void 0;var e=d(a("@babel/runtime/helpers/slicedToArray")),f=d(a("@babel/runtime/helpers/classCallCheck")),g=d(a("@babel/runtime/helpers/createClass")),h=function(){function a(b){(0,f["default"])(this,a),this.url=b;var c=this.extractID(this.url),d=c.id,e=c.login,g=c.formId;this.id=d,this.login=e,this.formId=g}return(0,g["default"])(a,[{key:"extractID",value:function(a){var b="",c="",d="",f=a.match(/[^/s\/]*\/[^/s\/]*\/?$/);if(f){var g=f[0].split("/"),h=(0,e["default"])(g,2);b=h[0],c=h[1],d="".concat(b,"-").concat(c)}return{login:b,formId:c,id:d}}},{key:"promiseHandler",value:function(a,b){var c=this;this.request.onreadystatechange=function(){if(4===c.request.readyState){c.pending=!1;var d=!0;c.request.onReady&&(d=c.request.onReady.apply(c)),200===c.request.status&&d?a(c.data):b(!1)}},this.pending=!0,this.request.send(this.params)}},{key:"load",value:function(){if(!this.pending)return this.request=new XMLHttpRequest,this.request.open("GET",this.url,!0),this.request.setRequestHeader("Accept","application/json"),new Promise(this.promiseHandler.bind(this)).then(this.handleLoadSuccess.bind(this),this.handleLoadFail.bind(this))}},{key:"transformAnswer",value:function(a){a.obj&&a.obj.settings&&(this.data=a.obj.settings,this.data.id=this.id,a.obj.state&&1===+a.obj.state&&(this.data.active=!0))}},{key:"submit",value:function(a){if(!this.pending)return this.request=new XMLHttpRequest,this.request.open("POST",this.url,!0),this.request.setRequestHeader("Content-Type","application/json"),this.request.setRequestHeader("Accept","application/json"),this.request.onReady=this.handleSubmitResult,this.params=JSON.stringify(a),new Promise(this.promiseHandler.bind(this))}},{key:"handleSubmitResult",value:function(){var a,b=document.createElement("div");b.innerHTML=this.request.responseText;try{a=JSON.parse(this.request.responseText)}catch(c){return console.log(c),!1}return this.error=a.errors,!a.errors}},{key:"handleLoadSuccess",value:function(){var a=this.request.responseText,b=JSON.parse(a);b.errors?this.errors=b.errors:this.transformAnswer(b)}},{key:"handleLoadFail",value:function(){}}]),a}();c.Connector=h},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/slicedToArray":15}],22:[function(a,b,c){"use strict";var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Cookies=void 0;var e=d(a("@babel/runtime/helpers/classCallCheck")),f=d(a("@babel/runtime/helpers/createClass")),g=a("../utils"),h=function(){function a(){(0,e["default"])(this,a)}return(0,f["default"])(a,null,[{key:"get",value:function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*".concat(encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&"),"\\s*\\=\\s*([^;]*).*$)|^.*$")),"$1"))||null:null}},{key:"set",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,g.getHostName)(),f=arguments.length>5?arguments[5]:void 0;if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var h="";if(c)switch(c.constructor){case Number:h=c===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age=".concat(c);break;case String:h="; expires=".concat(c);break;case Date:h="; expires=".concat(c.toUTCString())}return document.cookie="".concat(encodeURIComponent(a),"=").concat(encodeURIComponent(b)).concat(h).concat(e?"; domain=".concat(e):"").concat(d?"; path=".concat(d):"").concat(f?"; secure":""),!0}},{key:"remove",value:function(a,b,c){return!!this.has(a)&&(document.cookie="".concat(encodeURIComponent(a),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT").concat(c?"; domain=".concat(c):"").concat(b?"; path=".concat(b):""),!0)}},{key:"has",value:function(a){return!!a&&new RegExp("(?:^|;\\s*)".concat(encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&"),"\\s*\\=")).test(document.cookie)}},{key:"keys",value:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;c<b;c++)a[c]=decodeURIComponent(a[c]);return a}}]),a}();c.Cookies=h},{"../utils":54,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10}],23:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,i["default"])(a);if(b){var e=(0,i["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,h["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.ElementFactory=void 0;var g=f(a("@babel/runtime/helpers/inherits")),h=f(a("@babel/runtime/helpers/possibleConstructorReturn")),i=f(a("@babel/runtime/helpers/getPrototypeOf")),j=f(a("@babel/runtime/helpers/classCallCheck")),k=f(a("@babel/runtime/helpers/createClass")),l=a("./elements/Field"),m=a("./elements/NumberField"),n=a("./elements/Button"),o=a("./elements/Text"),p=a("./elements/Spacer"),q=a("./elements/ImageElement"),r=a("./elements/SingleChoiseField"),s=a("./elements/MultipleChoiseField"),t=a("./elements/DateField"),u=function(){function a(){(0,j["default"])(this,a)}return(0,k["default"])(a,[{key:"make",value:function(){return{}}}]),a}(),v=function(a){function b(){return(0,j["default"])(this,b),c.apply(this,arguments)}(0,g["default"])(b,a);var c=d(b);return(0,k["default"])(b,[{key:"make",value:function(a,b){switch(a.type){case"text":return new o.Text(a,b);case"intField":return new m.NumberField(a,b);case"textField":return new l.Field(a,b);case"radioField":return new r.SingleChoiseField(a,b);case"checkboxField":return new s.MultipleChoiseField(a,b);case"dateField":return new t.DateField(a,b);case"int":return new m.NumberField(a,b);case"free":return new l.Field(a,b);case"image":return new q.ImageElement(a,b);case"spacer":return new p.Spacer(a,b);case"field":switch(a.subtype){case"int":return new m.NumberField(a,b);case"1m":return new r.SingleChoiseField(a,b);case"nm":return new s.MultipleChoiseField(a,b);case"free":default:return new l.Field(a,b)}case"button":return new n.Button(a,b)}}}]),b}(u);c.ElementFactory=v},{"./elements/Button":29,"./elements/DateField":33,"./elements/Field":35,"./elements/ImageElement":36,"./elements/MultipleChoiseField":37,"./elements/NumberField":39,"./elements/SingleChoiseField":43,"./elements/Spacer":44,"./elements/Text":45,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],24:[function(a,b,c){"use strict";function d(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=e(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,f=function(){};return{s:f,n:function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function(a){throw a},f:f}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g,h=!0,i=!1;return{s:function(){c=c.call(a)},n:function(){var a=c.next();return h=a.done,a},e:function(a){i=!0,g=a},f:function(){try{h||null==c["return"]||c["return"]()}finally{if(i)throw g}}}}function e(a,b){if(a){if("string"==typeof a)return f(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?f(a,b):void 0}}function f(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}var g=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=void 0;var h=g(a("@babel/runtime/helpers/classCallCheck")),i=g(a("@babel/runtime/helpers/defineProperty")),j=a("./attributes"),k=function m(a){var b=this;(0,h["default"])(this,m),(0,i["default"])(this,"start",function(){b.checkEmbeddedForms(),document.addEventListener("DOMContentLoaded",b.checkEmbeddedForms),b.embeddedFormWatcher()}),(0,i["default"])(this,"checkEmbeddedForms",function(){var a=document.querySelectorAll("[".concat(j.ATTRIBUTES.EMBEDDED,"]"));a.forEach(function(a){var c=a.getAttribute(j.ATTRIBUTES.EMBEDDED);c&&!a.hasAttribute(j.ATTRIBUTES.INIT)&&(a.setAttribute(j.ATTRIBUTES.INIT,!0),b.activatePopup("https://sendsay.ru/form/".concat(c),{el:a}))})}),(0,i["default"])(this,"embeddedFormWatcher",function(){var a=function(a){var c,e=d(a);try{for(e.s();!(c=e.n()).done;){var f=c.value,g=f.type,h=f.addedNodes;if("childList"!==g||!h)return;b.checkEmbeddedForms()}}catch(i){e.e(i)}finally{e.f()}},c=new MutationObserver(a);c.observe(document,{attributes:!1,childList:!0,subtree:!0})}),this.activatePopup=a},l=k;c["default"]=l},{"./attributes":28,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/defineProperty":6,"@babel/runtime/helpers/interopRequireDefault":10}],25:[function(a,b,c){"use strict";var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Form=void 0;var e=d(a("@babel/runtime/helpers/classCallCheck")),f=d(a("@babel/runtime/helpers/createClass")),g=a("./ConditionWatcher"),h=a("./Cookies"),i=a("./elements/Popup"),j=a("./elements/PopupBar"),k=a("./elements/Embedded"),l=a("./elements/ToggleablePopup"),m=a("../utils"),n=d(a("./NotificationService")),o=d(a("./ClickTrigger")),p=function(){function a(b,c){(0,e["default"])(this,a),this.options=c||{},this.connector=b;var d=b.load();d&&d.then(this.runWatcher.bind(this),this.handleFail.bind(this))}return(0,f["default"])(a,[{key:"processConditionsSettings",value:function(){var a=this.connector.data.settings||{},b=JSON.parse(JSON.stringify(a));return b.showCondition=b.showCondition||{},this.options.instant&&(b.showCondition.instant=!0),this.options.ignoreState&&(b.ignoreState=!0),this.options.ignoreCookie&&(b.ignoreCookie=!0),b.active=this.connector.data.active,b}},{key:"setFrequencyCookie",value:function(a){a&&a&&a.settings&&a.settings.frequency&&h.Cookies.set("__sendsay_forms_".concat(a.id),a.settings.frequency,a.settings.frequency)}},{key:"setCountCookie",value:function(a){if(a){var b=+h.Cookies.get("__sendsay_forms_count_".concat(a.id))||0;a&&h.Cookies.set("__sendsay_forms_count_".concat(a.id),b+1,94608e3)}}},{key:"setSubmitCookie",value:function(a){a&&a&&h.Cookies.set("__sendsay_forms_submit_".concat(a.id),!0,94608e3)}},{key:"runWatcher",value:function(){var a=this,b=this.connector,c=b.data,d=b.id,e=b.formId,f=b.login;if(this.connector.errors){var h=new o["default"];return void h.watch(function(){n["default"].show()})}this.enable=!0;var m=this.processConditionsSettings(),p=new g.ConditionWatcher(m,{id:d,formId:e,login:f}),q=null;p.watch(function(b){var d;if(a.enable){switch(c.type){case"popup":q=i.Popup;break;case"bar":q=j.PopupBar;break;case"widget":q=l.ToggleablePopup;break;case"embedded":q=k.Embedded}!q||null!==(d=a.domObj)&&void 0!==d&&d.isShow||(a.domObj=null,a.domObj=new q(c),a.domObj.activate(a.options),a.domObj.el.addEventListener("sendsay-success",a.handleSubmit.bind(a)),a.setFrequencyCookie(a.connector.data),a.setCountCookie(a.connector.data),"widget"===c.type&&["scroll","delay","click","instant"].includes(b)&&a.domObj.handleTogglerClick())}},function(){})}},{key:"stopWatcher",value:function(){var a=this.connector.id;m.LeaveCounter.decrement(a),this.enable=!1}},{key:"handleFail",value:function(){}},{key:"handleSubmit",value:function(a){if(this.options.fakeSubmit)return this.handleSuccessSubmit();var b=a.detail.extra,c=this.connector.submit(b);c&&c.then(this.handleSuccessSubmit.bind(this),this.handleFailSubmit.bind(this))}},{key:"handleSuccessSubmit",value:function(){this.domObj.showEndDialog(),this.setSubmitCookie(this.connector.data)}},{key:"handleFailSubmit",value:function(){this.domObj.onSubmitFail();var a=this.connector.error;a&&(this.findInErrors(a,"wrong_member_email")||this.findInErrors(a,"error/email"))&&this.domObj.showErrorFor("_member_email","Неверный формат email адреса")}},{key:"findInErrors",value:function(a,b){for(var c=0;c<a.length;c++)if(a[c].id.includes(b))return!0;return!1}}]),a}();c.Form=p},{"../utils":54,"./ClickTrigger":19,"./ConditionWatcher":20,"./Cookies":22,"./NotificationService":27,"./elements/Embedded":34,"./elements/Popup":40,"./elements/PopupBar":41,"./elements/ToggleablePopup":46,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10}],26:[function(a,b,c){"use strict";var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.MediaQuery=void 0;var e=d(a("@babel/runtime/helpers/classCallCheck")),f=d(a("@babel/runtime/helpers/createClass")),g=function(){function a(b,c){(0,e["default"])(this,a),this.data=b,this.options=c,this.makeStyle(b)}return(0,f["default"])(a,[{key:"makeStyle",value:function(){var a="",b=this.data.conditions,c=this.data.selectors;a+="".concat(this.makeMediaCondition(b),"{");for(var d in c){var e=c[d];a+=this.makeSelectorRule(d,e)}a+=" }";var f=document.createElement("style");f.type="text/css",f.styleSheet?f.styleSheet.cssText=a:f.appendChild(document.createTextNode(a));var g=document.head.querySelectorAll("*");f.id="sendsay-generated-sheet",document.head.appendChild(f,g[g.length-1]),this.el=f}},{key:"makeMediaCondition",value:function(a){for(var b="@media ",c=0;c<a.length;c++)b+=" ".concat(0===c?"":"and"," ").concat(a[c]);return b}},{key:"makeSelectorRule",value:function(a,b){var c=" ".concat(a," { ");for(var d in b){var e=b[d];c+=" ".concat(d,":").concat(e,";")}return c+=" } "}}]),a}();c.MediaQuery=g},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10}],27:[function(a,b,c){"use strict";var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=void 0;var e=d(a("@babel/runtime/helpers/classCallCheck")),f=d(a("@babel/runtime/helpers/defineProperty")),g=a("./elements/Notification"),h=function l(){var a=this;(0,e["default"])(this,l),(0,f["default"])(this,"show",function(){var b;null!==(b=a.domObj)&&void 0!==b&&b.isShow||(a.domObj=new g.Notification(a.options()),a.domObj.activate())}),(0,f["default"])(this,"options",function(){return{active:!0,appearance:{animation:"slide",backgroundColor:"#fff",borderRadius:"20",labelFontFamily:'"Open Sans",Helvetica,Arial,sans-serif',labelFontSize:"14",labelTextColor:"#000",overlayEnabled:!1,paddingBottom:"20",paddingLeft:"20",paddingRight:"20",paddingTop:"20",position:"notify",textColor:"#000",width:400},settings:{},steps:[],toggle:{},type:"widget"}}),this.notify=null},i=null,j=function(){return i||(i=new h),i},k=j();c["default"]=k},{"./elements/Notification":38,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/defineProperty":6,"@babel/runtime/helpers/interopRequireDefault":10}],28:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ATTRIBUTES=void 0;var d={INIT:"data-sendsay-form-init",EMBEDDED:"data-sendsay-form-embedded",SUBSCRIBE:"data-sendsay-form-subscribe"};c.ATTRIBUTES=d},{}],29:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Button=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./DOMObject"),n=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){this.template='<div class="[%classes%]" style="[%wrapperstyle%]"><input type="button"  value="[%text%]" style="[%style%]" /></div>',this.baseClass="sendsay-button",this.applicableStyles={"background-color":{param:"backgroundColor"},"border-radius":{param:"borderRadius",postfix:"px"},color:{param:"textColor"},"line-height":{param:"lineHeight",postfix:"em","default":"normal"},"font-family":{param:"fontFamily"},"font-size":{param:"fontSize",postfix:"px"}},this.wrapperApplStyles={"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"}}}},{key:"addEvents",value:function(){this.el&&this.el.querySelector("input").addEventListener("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(){this.trigger("sendsay-click")}},{key:"removeEvents",value:function(){this.el&&this.el.querySelector("input").removeEventListener("click",this.handleClick.bind(this))}},{key:"makeStyles",value:function(){var a=this.data.appearance||{};a.fontFamily=this.escapeStyle(a.fontFamily);var c=(0,i["default"])((0,l["default"])(b.prototype),"makeStyles",this).call(this);return"justify"===a.align&&(c.width="100%"),c}},{key:"makeSettings",value:function(){var a=this.data.content||{},c=(0,i["default"])((0,l["default"])(b.prototype),"makeSettings",this).call(this);return c.text=this.escapeHTML(a.text||"Unknown"),c.wrapperstyle=this.makeWrapperStyle(),c}},{key:"makeWrapperStyle",value:function(){var a={},b=this.data.appearance||{};return"justify"!==b.align&&(a["text-align"]=b.align),a=this.extend(a,this.applyStyles(this.wrapperApplStyles)),this.convertStyles(a)}}]),b}(m.DOMObject);c.Button=n},{"./DOMObject":32,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],30:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.CheckBox=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./DOMObject"),n=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){this.template="".concat('<div class="[%classes%]" style="[%style%]"><input [%checked%] name="[%qid%]" value="[%value%]" type="checkbox" class="sendsay-checkinput"/>').concat(this.data.content.label?'<label for="[%label%]" class="sendsay-label">[%label%]</label>':"","</div>"),this.baseClass="sendsay-checkbox",this.handleChange=this.handleChange.bind(this),this.handleClick=this.handleClick.bind(this),this.applicableStyles={color:{param:"labelTextColor"},"font-family":{param:"labelFontFamily"},"font-size":{param:"labelFontSize",postfix:"px"}}}},{key:"build",value:function(){return(0,i["default"])((0,l["default"])(b.prototype),"build",this).call(this)}},{key:"makeSettings",value:function(){var a=this.data.content||{},c=this.data.field||{},d=this.data.appearance||{},e=(0,i["default"])((0,l["default"])(b.prototype),"makeSettings",this).call(this);return e.label=this.escapeHTML(a.label||a.name||""),e.qid=c.qid||c.name||"",e.value=a.value||"",e.checked=a.checked?"checked":"",d.hidden&&(e.classes+=" sendsay-field-hidden"),e}},{key:"addEvents",value:function(){this.el&&(this.el.querySelector("input").addEventListener("change",this.handleChange),this.el.querySelector("label")&&this.el.querySelector("label").addEventListener("click",this.handleClick))}},{key:"removeEvents",value:function(){this.el&&(this.el.querySelector("input").removeEventListener("change",this.handleChange),this.el.querySelector("label")&&this.el.querySelector("label").removeEventListener("click",this.handleClick))}},{key:"handleChange",value:function(a){a.stopPropagation(),this.trigger("sendsay-change",{checked:a.target.checked,value:a.target.value})}},{key:"handleClick",value:function(a){a.stopPropagation();var b=this.el.querySelector("input");b.checked=!b.checked,this.trigger("sendsay-change",{checked:b.checked,value:b.value})}},{key:"makeStyles",value:function(){var a=(0,i["default"])((0,l["default"])(b.prototype),"makeStyles",this).call(this);return a}}]),b}(m.DOMObject);c.CheckBox=n},{"./DOMObject":32,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,
"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],31:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Column=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./DOMObject"),n=a("../ElementFactory"),o=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){this.template='<div class="sendsay-columnwrapper" style = "width:100%; [%wrapperstyle%]"><div class="[%classes%]" style="[%style%]"></div></div>',this.baseClass="sendsay-column",this.applicableStyles={"background-color":{param:"backgroundColor"},"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"}},this.wrapperApplStyles={flex:{param:"flex"}}}},{key:"build",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"build",this).call(this),this.elements=[];var a=new n.ElementFactory,c=this.el.querySelector(".sendsay-column");if(this.data.elements)for(var d=this.data.elements,e=0;e<d.length;e++){var f=a.make(d[e],this);f&&(this.elements.push(f),c.appendChild(f.el))}return this.el}},{key:"makeSettings",value:function(){var a=(0,i["default"])((0,l["default"])(b.prototype),"makeSettings",this).call(this);return a.wrapperstyle=this.makeWrapperStyle(),a}},{key:"makeWrapperStyle",value:function(){var a={};return a=this.extend(a,this.applyStyles(this.wrapperApplStyles)),this.convertStyles(a)}}]),b}(m.DOMObject);c.Column=o},{"../ElementFactory":23,"./DOMObject":32,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],32:[function(a,b,c){"use strict";var d=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.DOMObject=void 0;var e=d(a("@babel/runtime/helpers/classCallCheck")),f=d(a("@babel/runtime/helpers/createClass")),g=function(){function a(b,c){(0,e["default"])(this,a),this.data=b,this.parent=c||null,c&&c.general&&(this.general=this.extend({},c.general)),this.initialize(),this.render()}return(0,f["default"])(a,[{key:"escapeHTML",value:function(a){var b=document.createElement("textarea");return b.textContent=a,b.innerHTML}},{key:"escapeStyle",value:function(a){if(this.style)return a.replace(/"/g,"'")}},{key:"initialize",value:function(){this.template="<div></div>",this.baseClass="sendsay-main",this.applicableStyles={}}},{key:"makeElement",value:function(){var a=document.createElement("div"),b=this.applySettings(this.makeSettings());return a.innerHTML=b,a.firstChild}},{key:"makeSettings",value:function(){var a={classes:this.makeClasses(),style:this.convertStyles(this.makeStyles())};return a}},{key:"makeStyles",value:function(){var a=this.applyStyles(this.applicableStyles);return a}},{key:"applyStyles",value:function(a){var b={},c=this.data.appearance||{},d=this.general&&this.general.appearance||{};for(var e in a){var f=a[e],g=c[f.param]||d[f.param];void 0===g||void 0===c[f.param]&&void 0===d[f.param]?f["default"]&&(b[e]=f["default"]):f.template?b[e]=this.processTemplate(f.template,{v:g}):b[e]=g+(f.postfix?f.postfix:"")}return b}},{key:"convertStyles",value:function(a){var b=a,c="";for(var d in b)c+=" ".concat(d,":").concat(b[d],";");return c}},{key:"makeClasses",value:function(){return this.baseClass}},{key:"applySettings",value:function(a){return this.processTemplate(this.template,a)}},{key:"processTemplate",value:function(a,b){b=b||{};for(var c=a,d=c.match(new RegExp("\\[% *[a-zA-Z0-9\\-]* *%\\]","g"))||[],e=0;e<d.length;e++){var f=d[e];f=f.substring(2,f.length-2);var g=b[f.trim()]||"";c=c.replace(new RegExp("\\[%".concat(f,"%\\]"),"g"),g)}return c}},{key:"build",value:function(){return this.el=this.makeElement(),this.el.core=this,this.el}},{key:"render",value:function(){var a=this.el;this.removeEvents(),this.build(),this.addEvents(),a&&a.parentNode&&a.parentNode.replaceChild(this.el,a),this.afterRender()}},{key:"afterRender",value:function(){}},{key:"addEvents",value:function(){}},{key:"addEvent",value:function(a,b,c){this._eventAction(!0,a,b,c)}},{key:"removeEvents",value:function(){}},{key:"removeEvent",value:function(a,b,c){this._eventAction(!1,a,b,c)}},{key:"_eventAction",value:function(a,b,c,d){if(this.el){void 0===d&&"function"==typeof c&&(d=c,c=null);var e=c?this.el.querySelectorAll(c):[this.el];e.forEach(function(c){c&&(a?c.addEventListener(b,d):c.removeEventListener(b,d))})}}},{key:"trigger",value:function(a,b){var c,d={extra:b};CustomEvent&&"function"==typeof CustomEvent?c=new CustomEvent(a,{detail:d}):(c=document.createEvent("HTMLEvents"),c.initEvent(a,!0,!0),c.detail=d),this.el.dispatchEvent(c)}},{key:"extend",value:function(a,b){a=a||{},b=b||{};for(var c in b)a[c]instanceof Object&&b[c]instanceof Object?a[c]=this.extend(a[c],b[c]):a[c]=b[c];return a}}]),a}();c.DOMObject=g},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/interopRequireDefault":10}],33:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.DateField=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./Field"),n=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){switch(this.template='<div class="[%classes%]" style="[%style%]"><label for="[%label%]" class="sendsay-label">[%label%]</label><input name="[%qid%]" placeholder="[%placeholder%]" value="[%value%]" type="text" class="sendsay-input"/><div type="text" class="sendsay-error"></div></div>',this.baseClass="sendsay-field",this.applicableStyles={"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},color:{param:"labelTextColor"},"font-family":{param:"labelFontFamily"},"font-size":{param:"labelFontSize",postfix:"px"}},this.accuracy=this.data.content.accuracy,this.dateTemplate="dd/dd/dddd",this.accuracy){case"ys":this.dateTemplate="dd.MM.yyyy hh:mm:ss";break;case"ym":this.dateTemplate="dd.MM.yyyy hh:mm";break;case"yh":this.dateTemplate="dd.MM.yyyy hh";break;case"yd":this.dateTemplate="dd.MM.yyyy"}this.types=["d","M","m","y","h","s"]}},{key:"getValue",value:function(){var a=this.extractAndSeparateValue(),b=this.accuracy;if(""===a)return"";var c="";return a&&(c="".concat(this.normalizeValue(a.year,4),"-").concat(this.normalizeValue(a.month,2),"-").concat(this.normalizeValue(a.day,2)),"ys"!==b&&"ym"!==b&&"yh"!==b||(c+=" ".concat(this.normalizeValue(a.hour,2)),"ys"!==b&&"ym"!==b||(c+=":".concat(this.normalizeValue(a.minute,2)),"ys"===b&&(c+=":".concat(this.normalizeValue(a.second,2)))))),c}},{key:"normalizeValue",value:function(a,b){if(null===a)return"00";for(var c="".concat(a),d=c.length,e=0;e<b-d;e++)c="0".concat(c);return c}},{key:"validate",value:function(){var a=(0,i["default"])((0,l["default"])(b.prototype),"validate",this).call(this),c=this.extractAndSeparateValue(),d=this.el.querySelector("input").value;if(""===d.trim())return!0;if(d&&d[d.length-1].match(/[0-9]/)||(a=!1),a&&c){var e=[31,29,31,30,31,30,31,31,30,31,30,31];c.year||(a=!1),(!c.month||c.month<1||c.month>12)&&(a=!1),a&&(!c.day||c.day<1||c.day>e[c.month-1])&&(a=!1),["yh","ym","ys"].indexOf(this.accuracy)!==-1&&(null!==c.hour&&(c.hour<0||c.hour>23)&&(a=!1),["ym","ys"].indexOf(this.accuracy)!==-1&&(null!==c.minute&&(c.minute<0||c.minute>59)&&(a=!1),"ys"===this.accuracy&&null!==c.second&&(c.second<0||c.second>59)&&(a=!1)))}else a=!1;return a||this.showErrorMessage("Введена неверная дата"),a}},{key:"extractAndSeparateValue",value:function(){var a=this.el.querySelector("input").value;if(""===a.trim())return"";var b=this.dateTemplate,c=b.match(/y+/),d=b.match(/M+/),e=b.match(/d+/),f=b.match(/h+/),g=b.match(/m+/),h=b.match(/s+/),i={};i.year=c&&+a.substr(c.index,c[0].length),i.month=d&&+a.substr(d.index,d[0].length),i.day=e&&+a.substr(e.index,e[0].length),i.hour=f&&+a.substr(f.index,f[0].length),i.minute=g&&+a.substr(g.index,g[0].length),i.second=h&&+a.substr(h.index,h[0].length);for(var j in i)i[j]=i[j]||null;return i}},{key:"addEvents",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"addEvents",this).call(this),this.addEvent("keypress","input",this.handleKeyPress.bind(this)),this.addEvent("keydown","input",this.handleKeyDown.bind(this)),this.addEvent("paste","input",this.handlePaste.bind(this)),this.addEvent("drop","input",this.handleDrop.bind(this))}},{key:"handleKeyDown",value:function(a){if(8!==a.keyCode&&46!==a.keyCode)return!0;var b=a.target.value.split(""),c=this.getSelectionStart(),d=this.getSelectionEnd(),e=a.key;"Backspace"===e?(e=void 0,c>0&&c===d&&c--):"Delete"===e&&(e=void 0,c===d&&d++),b.splice(c,d-c),this.updateInput(b),a.stopPropagation(),a.preventDefault(),this.setCursor(c)}},{key:"handlePaste",value:function(a){var b=a.clipboardData||window.clipboardData,c=b.getData("Text"),d=a.target.value.split(""),e=this.getSelectionStart(),f=this.getSelectionEnd();d.splice.apply(d,[e,f-e].concat(c.split(""))),this.updateInput(d);var g=c.replace(/[^\d]/g,"").split("");this.setCursor(this.findCursorPosition(a.target.value.split(""),g,e)),a.stopPropagation(),a.preventDefault()}},{key:"handleKeyPress",value:function(a){var b=a.target.value.length===this.dateTemplate.length,c=this.getSelectionStart(),d=this.getSelectionEnd(),e=a.target.value.split(""),f=a.key;return a.key.match(/\d/)||(f=void 0),e.splice(c,d-c,f),this.updateInput(e),a.preventDefault(),a.stopPropagation(),this.setCursor(b&&c===d?c:this.findCursorPosition(a.target.value.split(""),[f],c)),!1}},{key:"handleDrop",value:function(a){return a.preventDefault(),a.stopPropagation(),!1}},{key:"updateInput",value:function(a){var b=this.el.querySelector("input"),c=a.join("").replace(/[^\d]/g,""),d=this.applyDateTemplate(this.dateTemplate,c);b.value=d}},{key:"applyDateTemplate",value:function(a,b){for(var c=b.split(""),d=a.split(""),e=0,f=0;e<d.length&&f<c.length;e++)this.types.indexOf(d[e])!==-1&&(d[e]=c[f],f++);return d.splice(e,1e3),d.join("")}},{key:"countBefore",value:function(a,b,c){var d=0;void 0==c&&(c=1e5);for(var e=0;e<c&&e<a.length;e++)a[e].match(b)&&d++;return d}},{key:"findCursorPosition",value:function(a,b,c){var d,e;for(d=c,e=0;d<a.length&&e<b.length;d++)a[d]===b[e]&&e++;return d}},{key:"setCursor",value:function(a){var b=this.el.querySelector("input"),c=b.value;c.length>=a&&b.setSelectionRange(a,a)}},{key:"getSelectionEnd",value:function(){var a=this.el.querySelector("input");return a.selectionEnd}},{key:"getSelectionStart",value:function(){var a=this.el.querySelector("input");return a.selectionStart}},{key:"selection",value:function(){return window.getSelection()||document.getSelection()}}]),b}(m.Field);c.DateField=n},{"./Field":35,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],34:[function(a,b,c){"use strict";function d(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function e(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?d(Object(c),!0).forEach(function(b){(0,i["default"])(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):d(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function f(a){var b=g();return function(){var c,d=(0,o["default"])(a);if(b){var e=(0,o["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,n["default"])(this,c)}}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var h=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Embedded=void 0;var i=h(a("@babel/runtime/helpers/defineProperty")),j=h(a("@babel/runtime/helpers/classCallCheck")),k=h(a("@babel/runtime/helpers/createClass")),l=h(a("@babel/runtime/helpers/get")),m=h(a("@babel/runtime/helpers/inherits")),n=h(a("@babel/runtime/helpers/possibleConstructorReturn")),o=h(a("@babel/runtime/helpers/getPrototypeOf")),p=a("./Popup"),q=function(a){function b(){return(0,j["default"])(this,b),c.apply(this,arguments)}(0,m["default"])(b,a);var c=f(b);return(0,k["default"])(b,[{key:"initialize",value:function(){(0,l["default"])((0,o["default"])(b.prototype),"initialize",this).call(this),this.makeBorder(),this.makeShadow(),this.applicableStyles.display={"default":"none"}}},{key:"makeBorder",value:function(){var a=this.data.appearance||{},b=a.borderEnabled,c=a.borderWidth,d=a.borderColor;b&&(this.applicableStyles.border={"default":"".concat(c,"px solid ").concat(d)})}},{key:"makeShadow",value:function(){var a=this.data.appearance||{},b=a.shadowEnabled,c=a.shadowOffsetX,d=a.shadowOffsetY,e=a.shadowBlur,f=a.shadowSpread,g=a.shadowColor;b&&(this.applicableStyles["box-shadow"]={"default":"".concat(c,"px ").concat(d,"px ").concat(e,"px ").concat(f,"px ").concat(g)})}},{key:"activate",value:function(a){if(a.el)return void(0,l["default"])((0,o["default"])(b.prototype),"activate",this).call(this,a);var c=document.querySelector('[data-sendsay-form-root="'.concat(a.formId,'"]'));c&&(c.innerHTML="",(0,l["default"])((0,o["default"])(b.prototype),"activate",this).call(this,e(e({},a),{},{el:c})))}},{key:"handleWheel",value:function(){return!1}},{key:"handleKeyPress",value:function(a){var c,d=null===(c=this.data.settings)||void 0===c?void 0:c.canClose;(27!==a.keyCode||0!==this.curStep&&(1!==this.curStep||d))&&(0,l["default"])((0,o["default"])(b.prototype),"handleKeyPress",this).call(this,a)}}]),b}(p.Popup);c.Embedded=q},{"./Popup":40,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/defineProperty":6,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],35:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Field=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./DOMObject"),n=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){this.template='<div class="[%classes%]" style="[%style%]"><label for="[%label%]" class="sendsay-label">[%label%]</label><input name="[%qid%]" placeholder="[%placeholder%]" value="[%value%]" type="text" class="sendsay-input"/><div type="text" class="sendsay-error"></div></div>',this.baseClass="sendsay-field",this.applicableStyles={"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},color:{param:"labelTextColor"},"font-family":{param:"labelFontFamily"},"font-size":{param:"labelFontSize",postfix:"px"}}}},{key:"makeSettings",value:function(){var a=this.data.field||{},c=this.data.content||{},d=this.data.appearance||{},e=(0,i["default"])((0,l["default"])(b.prototype),"makeSettings",this).call(this);return e.label=this.escapeHTML(c.label||""),e.placeholder=this.escapeHTML(c.placeholder||""),e.qid=a.id||a.qid||"",e.value=a["default"]||"",d.hidden&&(e.classes+=" sendsay-field-hidden"),a.required&&(e.label+="*"),e}},{key:"validate",value:function(){return this.removeErrorMessage(),!this.data.field.required||""!=this.getValue()||(this.showErrorMessage("Обязательное поле"),!1)}},{key:"showErrorMessage",value:function(a){this.el.classList.add("sendsay-field-invalid"),this.el.querySelector(".sendsay-error").innerHTML=a}},{key:"removeErrorMessage",value:function(){this.el.classList.remove("sendsay-field-invalid"),this.el.querySelector(".sendsay-error").innerHTML=""}},{key:"getValue",value:function(){return this.el.querySelector("input").value}}]),b}(m.DOMObject);c.Field=n},{"./DOMObject":32,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],36:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.ImageElement=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./DOMObject"),n=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){this.template='<div class="[%classes%]" style="[%wrapperstyle%]"><img src="[%url%]" style="[%style%]/>" /></div>',this.wrapperApplStyles={"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"}},this.baseClass="sendsay-image"}},{key:"addEvents",value:function(){this.el&&(this.el.querySelector("img").onload=this.handleLoad.bind(this))}},{key:"handleLoad",value:function(){this.trigger("sendsay-image-load")}},{key:"makeStyles",value:function(){var a=(0,i["default"])((0,l["default"])(b.prototype),"makeStyles",this).call(this),c=this.data.appearance||{};return c.extended?a.width="100%":a["max-width"]="100%",a}},{key:"makeSettings",value:function(){var a=this.data.content||{},c=(0,i["default"])((0,l["default"])(b.prototype),"makeSettings",this).call(this);return c.wrapperstyle=this.makeWrapperStyle(),c.url=a.url,c}},{key:"makeWrapperStyle",value:function(){var a={},b=this.data.appearance||{};return a["text-align"]=b.align,a=this.extend(a,this.applyStyles(this.wrapperApplStyles)),this.convertStyles(a)}}]),b}(m.DOMObject);c.ImageElement=n},{"./DOMObject":32,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],37:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.MultipleChoiseField=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./Field"),n=a("./CheckBox"),o=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"initialize",this).call(this),this.template='<div class="[%classes%]" style="[%style%]"><label for="[%label%]" class="sendsay-label">[%label%]</label><div class="sendsay-container"></div><div type="text" class="sendsay-error"></div></div>',this.curValues=this.data.field["default"]||[],this.baseClass="sendsay-field",this.handleChangeValue=this.handleChangeValue.bind(this),this.applicableStyles={"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},color:{param:"labelTextColor"},"font-family":{param:"labelFontFamily"},"font-size":{param:"labelFontSize",postfix:"px"}}}},{key:"build",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"build",this).call(this),this.elements=[];var a=this.el.querySelector(".sendsay-container"),c=this.data.field||{};if(this.data.field.answers){var d=c.answers;for(var e in d){var f=new n.CheckBox({field:{qid:c.id||c.qid||""},content:{label:d[e],value:e,checked:this.curValues.indexOf(e)!==-1}},this);f&&(f.el.addEventListener("sendsay-change",this.handleChangeValue),this.elements.push(f),a.appendChild(f.el))}}return this.el}},{key:"handleChangeValue",value:function(a){var b=a.detail.extra;b.checked?this.curValues.indexOf(b.value)===-1&&this.curValues.push(b.value):this.curValues.indexOf(b.value)!==-1&&this.curValues.splice(this.curValues.indexOf(b.value),1)}},{key:"getValue",value:function(){return this.curValues}},{key:"validate",value:function(){return this.removeErrorMessage(),!this.data.field.required||0!==this.getValue().length||(this.showErrorMessage("Обязательное поле"),!1)}}]),b}(m.Field);c.MultipleChoiseField=o},{"./CheckBox":30,"./Field":35,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],38:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Notification=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./ToggleablePopup"),n=f(a("../../icons/warning")),o=a("../../l8n"),p=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"initialize",this).call(this),this.mobileWith=280}},{key:"build",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"build",this).call(this);var a=this.el.querySelector(".sendsay-toggler");a.innerHTML='\n      <div class="sendsay-warning">\n        <div>\n          '.concat(n["default"],'\n        </div>\n        <div class="sendsay-warning__text">').concat((0,o.l8n)("notify__form-is-inactive"),"</div>\n      </div>\n    ")}},{key:"handleTogglerClick",value:function(){}}]),b}(m.ToggleablePopup);c.Notification=p},{"../../icons/warning":48,"../../l8n":49,"./ToggleablePopup":46,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],39:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.NumberField=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./Field"),n=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"validate",value:function(){var a=(0,i["default"])((0,l["default"])(b.prototype),"validate",this).call(this);if(a){var c=this.getValue();a=!c.match(/[\.xXeE]/)&&!isNaN(+c),a||this.showErrorMessage("Неверный формат целого числа")}return a}}]),b}(m.Field);c.NumberField=n},{"./Field":35,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],40:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Popup=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./DOMObject"),n=a("../MediaQuery"),o=a("./Column"),p=a("./Field"),q=a("./Button"),r=f(a("../../icons/close")),s=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){this.isShow=!1;var a=this.data.appearance||{};this.noWrapper=!a.overlayEnabled,this.steps=this.data.steps,this.curStep=0,this.gainedData={},this.template="".concat("".concat(this.noWrapper?"":'<div class = "sendsay-wrapper [%wrapperClasses%]" style="[%overlayStyles%]">','<div class="[%classes%]" style="[%style%]">')+'<div class="sendsay-close sendsay-close--with-icon">').concat(r["default"],"</div>")+'<div class = "sendsay-content"></div>'+"</div>".concat(this.noWrapper?"":"</div>"),this.baseClass="sendsay-popup",this.applicableStyles={"background-color":{param:"backgroundColor"},"border-radius":{param:"borderRadius",postfix:"px"},"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},width:{param:"width",postfix:"px"},color:{param:"textColor"}},this.applOverlayStyles={"background-color":{param:"overlayColor"}},a.position=a.position||"centered",this.general={},this.general.appearance={},this.general.appearance.textColor=this.data.appearance.textColor,this.general.appearance.labelTextColor=this.data.appearance.labelTextColor,this.general.appearance.labelFontSize=this.data.appearance.labelFontSize,this.general.appearance.labelFontFamily=this.escapeStyle(this.data.appearance.labelFontFamily)}},{key:"makeMediaQuery",value:function(){var a=this.data.appearance||{},b=a.width,c=new n.MediaQuery({conditions:["screen","(min-width: 320px)","(max-width:".concat(+b+100,"px)")],selectors:{".sendsay-popup":{width:"300px !important","-webkit-flex-direction":"column","-ms-flex-direction":"column","flex-direction":"column",
animation:"none"},".sendsay-popup.sendsay-left, .sendsay-popup.sendsay-right":{top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"none",bottom:"initial"},".sendsay-popup .sendsay-content":{"-webkit-flex-direction":"column","-ms-flex-direction":"column","flex-direction":"column"}}});this.mediaQuery=c}},{key:"build",value:function(){var a;if((0,i["default"])((0,l["default"])(b.prototype),"build",this).call(this),this.columns=[],(null===(a=this.steps)||void 0===a?void 0:a.length)>0){var c=this.steps[this.curStep],d=this.el.querySelector(".sendsay-content");if(c.columns)for(var e=c.columns,f=0;f<e.length;f++){var g=new o.Column(e[f],this);g&&(this.columns.push(g),d.appendChild(g.el))}}if(this.demo||this.container){var h=this.el.querySelector(".sendsay-popup");this.el.style.position="absolute",h&&(h.style.position="absolute")}return this.el}},{key:"addEvents",value:function(){this.noWrapper?this.addEvent("click",this.handlePopupClick.bind(this)):(this.addEvent("click",this.handleWrapperClick.bind(this)),this.addEvent("click",".sendsay-popup",this.handlePopupClick.bind(this))),this.addEvent("sendsay-click",".sendsay-button",this.handleButtonClick.bind(this)),this.addEvent("wheel",this.handleWheel.bind(this)),this.addEvent("DOMMouseScroll",this.handleWheel.bind(this)),this.addEvent("click",".sendsay-close",this.handleClose.bind(this)),this.addEvent("keyup",this.handleKeyPress.bind(this))}},{key:"removeEvents",value:function(){this.noWrapper?this.removeEvent("click",this.handlePopupClick.bind(this)):(this.removeEvent("click",this.handleWrapperClick.bind(this)),this.removeEvent("click",".sendsay-popup",this.handlePopupClick.bind(this))),this.removeEvent("sendsay-click",".sendsay-button",this.handleButtonClick.bind(this)),this.removeEvent("wheel",this.handleWheel.bind(this)),this.removeEvent("DOMMouseScroll",this.handleWheel.bind(this)),this.removeEvent("click",".sendsay-close",this.handleClose.bind(this)),this.removeEvent("keyup",this.handleKeyPress.bind(this))}},{key:"makeSettings",value:function(){var a=(0,i["default"])((0,l["default"])(b.prototype),"makeSettings",this).call(this);return a.wrapperClasses=this.data.noAnimation?"sendsay-noanimation":"",a.overlayStyles=this.convertStyles(this.applyStyles(this.applOverlayStyles)),a}},{key:"makeClasses",value:function(){var a=this.data||{},c=a.appearance,d=a.settings,e=(0,i["default"])((0,l["default"])(b.prototype),"makeClasses",this).call(this);return e+=this.data.endDialog?" sendsay-enddialog":"",e+=" sendsay-animation-".concat(c.animation||"none"),e+=" sendsay-".concat(c.position||"center"),e+=" sendsay-type-".concat(this.data.type),null!==d&&void 0!==d&&d.canClose&&(e+=" sendsay--can-close"),this.steps.length-1===this.curStep&&(e+=" sendsay-laststep"),e}},{key:"activate",value:function(a){this.demo=a&&a.demo,this.container=a&&a.el,this.ignoreKeyboard=a&&a.ignoreKeyboard,this.show(a)}},{key:"searchForElements",value:function(a){var b=[];if(!a||"function"!=typeof a)return b;for(var c=this.columns,d=0;d<c.length;d++)for(var e=c[d],f=e.elements,g=0;g<f.length;g++)a(f[g])&&b.push(f[g]);return b}},{key:"showEndDialog",value:function(){this.isSubmitted=!0,this.proceedToNextStep()}},{key:"onSubmitFail",value:function(){var a=this.searchForElements(function(a){return a instanceof q.Button});a[0]&&a[0].el.querySelector("input").classList.remove("sendsay-loading")}},{key:"show",value:function(){this.isShow=!0,this.makeMediaQuery(),this.container?(this.el.style.position="absolute",this.noWrapper||(this.el.querySelector(".sendsay-popup").style.position="absolute"),this.container.appendChild(this.el)):document.querySelector("body").appendChild(this.el)}},{key:"hide",value:function(){this.isShow=!1,this.el.parentNode&&(this.el.parentNode.removeChild(this.el),this.mediaQuery&&(this.mediaQuery.el.remove(),this.mediaQuery=null))}},{key:"submit",value:function(){var a,b=this.searchForElements(function(a){return a instanceof p.Field||a instanceof q.Button}),c=!0,d={};if(b)for(var e=0;e<b.length;e++){var f=b[e];f instanceof p.Field&&(d[f.data.field.id||f.data.field.qid]=f.getValue(),c=f.validate()&&c),f instanceof q.Button&&(a=f)}return c&&(this.extend(this.gainedData,d),this.steps.length-2!==this.curStep?this.proceedToNextStep():(a.el.querySelector("input").classList.add("sendsay-loading"),this.trigger("sendsay-success",this.gainedData))),c}},{key:"proceedToNextStep",value:function(){this.curStep++,0!==this.curStep&&(this.data.appearance.animation="none"),this.render()}},{key:"showErrorFor",value:function(a,b){for(var c=this.searchForElements(function(a){return a instanceof p.Field}),d=0;d<c.length;d++){var e=c[d];!e.data.field||e.data.field.qid!==a&&e.data.field.id!==a||e.showErrorMessage(b)}}},{key:"handleWrapperClick",value:function(){}},{key:"handleWheel",value:function(a){var b=Math.sign(a.wheelDelta);if(a.target.classList.contains("sendsay-wrapper"))a.preventDefault();else{var c=this.noWrapper?this.el:this.el.querySelector(".sendsay-popup");(b===-1&&c.clientHeight+c.scrollTop===c.scrollHeight||1===b&&0===c.scrollTop)&&a.preventDefault()}return!1}},{key:"handlePopupClick",value:function(a){a.stopPropagation()}},{key:"handleButtonClick",value:function(){this.isSubmitted?this.hide():this.submit()&&this.demo&&this.showEndDialog()}},{key:"handleKeyPress",value:function(a){if(!this.ignoreKeyboard)switch(a.keyCode){case 13:this.isSubmitted?this.hide():this.submit()&&this.demo&&this.showEndDialog();break;case 27:this.hide()}}},{key:"handleClose",value:function(){this.hide()}}]),b}(m.DOMObject);c.Popup=s},{"../../icons/close":47,"../MediaQuery":26,"./Button":29,"./Column":31,"./DOMObject":32,"./Field":35,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],41:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,k["default"])(a);if(b){var e=(0,k["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,j["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.PopupBar=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/inherits")),j=f(a("@babel/runtime/helpers/possibleConstructorReturn")),k=f(a("@babel/runtime/helpers/getPrototypeOf")),l=a("./Popup"),m=a("../MediaQuery"),n=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,i["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){var a=this.data.appearance||{};this.noWrapper=!1,this.noWrapper=!a.overlayEnabled,this.steps=this.data.steps,this.curStep=0,this.gainedData={},this.template="".concat(this.noWrapper?"":'<div class="sendsay-wrapper [%wrapperClasses%]" style="[%overlayStyles%]">','<div class="[%classes%]" style="[%style%]">')+'<div class="sendsay-close">×</div><div class="sendsay-content"></div>'+"</div>".concat(this.noWrapper?"":"</div>"),this.baseClass="sendsay-popup",this.applicableStyles={"background-color":{param:"backgroundColor"},"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},color:{param:"textColor"}},this.maintextApplStyle={"font-family":{param:"font-family"},"font-size":{param:"fontSize",postfix:"px"},"text-align":{param:"text-align",postfix:"px"}},this.applOverlayStyles={"background-color":{param:"overlayColor"}},a.position=a.position||"centered",this.general={},this.general.appearance={},this.general.appearance.textColor=this.data.appearance.textColor,this.general.appearance.labelTextColor=this.data.appearance.labelTextColor,this.general.appearance.labelFontSize=this.data.appearance.labelFontSize,this.general.appearance.labelFontFamily=this.escapeStyle(this.data.appearance.labelFontFamily)}},{key:"makeMediaQuery",value:function(){var a=800,b=new m.MediaQuery({conditions:["screen","(min-width: 320px)","(max-width:".concat(+a+100,"px)")],selectors:{".sendsay-popup":{width:"300px !important","-webkit-flex-direction":"column","-ms-flex-direction":"column","flex-direction":"column",animation:"none"},".sendsay-popup.sendsay-type-bar.sendsay-top, .sendsay-popup.sendsay-type-bar.sendsay-bottom":{top:"50%",left:"50%",transform:"translate(-50%, -50%)",animation:"none",bottom:"initial"},".sendsay-column":{height:"auto !important","flex-direction":"column"},".sendsay-popup.sendsay-type-bar.sendsay-top  .sendsay-column > *, .sendsay-popup.sendsay-type-bar.sendsay-bottom .sendsay-column > *":{"padding-bottom":"20px","padding-left":"0px"},".sendsay-popup.sendsay-type-bar.sendsay-top.sendsay-animation-slidetop":{animation:"none"},".sendsay-popup.sendsay-type-bar.sendsay-bottom.sendsay-animation-slidebottom":{animation:"none"}}});this.mediaQuery=b}}]),b}(l.Popup);c.PopupBar=n},{"../MediaQuery":26,"./Popup":40,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],42:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.RadioButton=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./DOMObject"),n=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){this.template="".concat('<div class="[%classes%]" style="[%style%]"><input [%checked%] name="[%qid%]" value="[%value%]" type="radio" class="sendsay-radioinput"/>').concat(this.data.content.label?'<label for="[%qid%]" class="sendsay-label">[%label%]</label>':"","</div>"),this.baseClass="sendsay-radio",this.handleChange=this.handleChange.bind(this),this.handleClick=this.handleClick.bind(this),this.applicableStyles={color:{param:"labelTextColor"},"font-family":{param:"labelFontFamily"},"font-size":{param:"labelFontSize",postfix:"px"}}}},{key:"build",value:function(){return(0,i["default"])((0,l["default"])(b.prototype),"build",this).call(this)}},{key:"makeSettings",value:function(){var a=this.data,c=(0,i["default"])((0,l["default"])(b.prototype),"makeSettings",this).call(this),d=a.content||{},e=a.field||{},f=a.appearance||{};return c.label=this.escapeHTML(d.label||""),c.qid=e.qid||"",c.value=d.value||"",c.checked=d.checked?"checked":"",f.hidden&&(c.classes+=" sendsay-field-hidden"),c}},{key:"addEvents",value:function(){this.el&&(this.el.querySelector("input").addEventListener("change",this.handleChange),this.data.content.label&&this.el.querySelector("label").addEventListener("click",this.handleClick))}},{key:"removeEvents",value:function(){this.el&&(this.el.querySelector("input").removeEventListener("change",this.handleChange),this.data.content.label&&this.el.querySelector("label").removeEventListener("click",this.handleClick))}},{key:"handleChange",value:function(a){a.stopPropagation(),this.trigger("sendsay-change",{checked:a.target.checked,value:a.target.value})}},{key:"handleClick",value:function(a){a.stopPropagation();var b=this.el.querySelector("input");b.checked=!0,this.trigger("sendsay-change",{checked:b.checked,value:b.value})}}]),b}(m.DOMObject);c.RadioButton=n},{"./DOMObject":32,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],43:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.SingleChoiseField=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./Field"),n=a("./RadioButton"),o=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"initialize",this).call(this),this.template='<div class="[%classes%]" style="[%style%]"><label for="[%label%]" class="sendsay-label">[%label%]</label><div class="sendsay-container"></div><div type="text" class="sendsay-error"></div></div>';var a=this.data.field||{};this.curValue=a["default"]||"",this.baseClass="sendsay-field",this.handleChangeValue=this.handleChangeValue.bind(this),this.applicableStyles={"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},color:{param:"labelTextColor"},"font-family":{param:"labelFontFamily"},"font-size":{param:"labelFontSize",postfix:"px"}}}},{key:"build",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"build",this).call(this),this.elements=[];var a=this.data.field||{},c=this.el.querySelector(".sendsay-container");if(a.answers){var d=a.answers;for(var e in d){var f=new n.RadioButton({field:{qid:a.id||a.qid||""},content:{label:d[e],value:e,checked:e===this.curValue}},this);f&&(f.el.addEventListener("sendsay-change",this.handleChangeValue),this.elements.push(f),c.appendChild(f.el))}}return this.el}},{key:"handleChangeValue",value:function(a){var b=a.detail.extra;this.curValue=b.value}},{key:"getValue",value:function(){return this.curValue}}]),b}(m.Field);c.SingleChoiseField=o},{"./Field":35,"./RadioButton":42,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],44:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,k["default"])(a);if(b){var e=(0,k["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,j["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Spacer=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/inherits")),j=f(a("@babel/runtime/helpers/possibleConstructorReturn")),k=f(a("@babel/runtime/helpers/getPrototypeOf")),l=a("./DOMObject"),m=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,i["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){this.template='<div class="[%classes%]" style="[%style%]"></div>',this.baseClass="sendsay-spacer",this.applicableStyles={height:{param:"height",postfix:"px"}}}}]),b}(l.DOMObject);c.Spacer=m},{"./DOMObject":32,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],45:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.Text=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./DOMObject"),n=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){this.template='<div class="sendsay-text" style="[%style%]">[%text%]</div>',this.baseClass="sendsay-text",this.applicableStyles={"text-align":{param:"align","default":"left"},"line-height":{param:"lineHeight","default":"normal"},"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},color:{param:"textColor"}}}},{key:"build",value:function(){return(0,i["default"])((0,l["default"])(b.prototype),"build",this).call(this)}},{key:"makeSettings",value:function(){var a=this.data.content||{},c=(0,i["default"])((0,l["default"])(b.prototype),"makeSettings",this).call(this);return c.text=a.text||"",c}}]),b}(m.DOMObject);c.Text=n},{"./DOMObject":32,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],46:[function(a,b,c){"use strict";function d(a){var b=e();return function(){var c,d=(0,l["default"])(a);if(b){var e=(0,l["default"])(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,k["default"])(this,c)}}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var f=a("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(c,"__esModule",{value:!0}),c.ToggleablePopup=void 0;var g=f(a("@babel/runtime/helpers/classCallCheck")),h=f(a("@babel/runtime/helpers/createClass")),i=f(a("@babel/runtime/helpers/get")),j=f(a("@babel/runtime/helpers/inherits")),k=f(a("@babel/runtime/helpers/possibleConstructorReturn")),l=f(a("@babel/runtime/helpers/getPrototypeOf")),m=a("./Popup"),n=a("./Text"),o=a("../MediaQuery"),p=function(a){function b(){return(0,g["default"])(this,b),c.apply(this,arguments)}(0,j["default"])(b,a);var c=d(b);return(0,h["default"])(b,[{key:"initialize",value:function(){var a=this.data.appearance||{};this.noWrapper=!a.overlayEnabled,this.steps=this.data.steps,this.curStep=0,this.gainedData={},this.template="".concat(this.noWrapper?"":'<div class="sendsay-wrapper [%wrapperClasses%]" style="[%overlayStyles%]">','<div class="[%classes%]" style="[%style%]">')+'<div class="sendsay-close">×</div><div class="sendsay-toggler"><span class="sendsay-toggler-desktop">[%toggle%]</span><span class="sendsay-toggler-mobile">[%toggle%]</span></div><div class="sendsay-content"></div>'+"</div>".concat(this.noWrapper?"":"</div>"),this.baseClass="sendsay-popup",this.applicableStyles={"background-color":{param:"backgroundColor"},"padding-bottom":{param:"paddingBottom",postfix:"px"},"padding-top":{param:"paddingTop",postfix:"px"},"padding-left":{param:"paddingLeft",postfix:"px"},"padding-right":{param:"paddingRight",postfix:"px"},color:{param:"textColor"},width:{param:"width",prefix:"px"},"border-radius":{param:"borderRadius",template:"[%v%]px [%v%]px 0px 0px"}},this.maintextApplStyle={"font-family":{param:"font-family"},"font-size":{param:"fontSize",postfix:"px"},"text-align":{param:"text-align",postfix:"px"}},this.applOverlayStyles={"background-color":{param:"overlayColor"}},a.position=a.position||"centered",this.general={},this.general.appearance={},this.general.appearance.textColor=this.data.appearance.textColor,this.general.appearance.labelTextColor=this.data.appearance.labelTextColor,this.general.appearance.labelFontSize=this.data.appearance.labelFontSize,this.general.appearance.labelFontFamily=this.escapeStyle(this.data.appearance.labelFontFamily),this.mobileWith=150}},{key:"makeMediaQuery",value:function(){var a=this.data.appearance||{},b=a.width,c=new o.MediaQuery({conditions:["screen","(min-width: 320px)","(max-width:".concat(+b+100,"px)")],selectors:{".sendsay-popup.sendsay-type-widget":{width:"".concat(this.mobileWith,"px !important"),"-webkit-flex-direction":"column","-ms-flex-direction":"column","flex-direction":"column",animation:"none",bottom:"50px",right:"50px","border-radius":"0px !important"},".sendsay-popup.sendsay-type-widget .sendsay-content":{display:"none",transition:"none"},".sendsay-popup.sendsay-type-widget .sendsay-toggler ":{"font-size":"14px !important"},".sendsay-popup.sendsay-type-widget.sendsay-opened  .sendsay-toggler":{display:"none"},".sendsay-popup.sendsay-type-widget.sendsay-opened .sendsay-content":{display:"block",transition:"none"},".sendsay-popup.sendsay-type-widget.sendsay-opened":{top:"50%",left:"50%",transform:"translate(-50%, -50%)",bottom:"initial",right:"initial",width:"300px !important"},".sendsay-popup.sendsay-type-widget.sendsay-opened .sendsay-close":{display:"block"},".sendsay-popup.sendsay-type-widget.sendsay-right .sendsay-toggler .sendsay-toggler-mobile, .sendsay-popup.sendsay-type-widget.sendsay-left .sendsay-toggler .sendsay-toggler-mobile":{display:"block"},".sendsay-popup.sendsay-type-widget.sendsay-right .sendsay-toggler .sendsay-toggler-desktop, .sendsay-popup.sendsay-type-widget.sendsay-left .sendsay-toggler .sendsay-toggler-desktop":{display:"none"}}});this.mediaQuery=c}},{key:"makeSettings",value:function(){var a=(0,i["default"])((0,l["default"])(b.prototype),"makeSettings",this).call(this);return a.toggle=new n.Text(this.data.toggle).build().outerHTML,a}},{key:"addEvents",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"addEvents",this).call(this),this.addEvent("click",".sendsay-toggler",this.handleTogglerClick.bind(this)),this.addEvent("sendsay-image-load",".sendsay-image",this.setSaneMaxHeight.bind(this))}},{key:"removeEvents",value:function(){(0,i["default"])((0,l["default"])(b.prototype),"removeEvents",this).call(this),this.removeEvent("click",".sendsay-toggler",this.handleTogglerClick.bind(this)),this.removeEvent("sendsay-image-load",".sendsay-image",this.setSaneMaxHeight.bind(this))}},{key:"handleTogglerClick",value:function(){var a=this.noWrapper?this.el:this.el.querySelector(".sendsay-popup"),b=a.querySelector(".sendsay-content");a.classList.contains("sendsay-opened")?(a.classList.remove("sendsay-opened"),b.style.maxHeight="0px"):(a.classList.add("sendsay-opened"),this.setSaneMaxHeight())}},{key:"submit",value:function(){var a=(0,i["default"])((0,l["default"])(b.prototype),"submit",this).call(this);return this.setSaneMaxHeight(),a}},{key:"setSaneMaxHeight",value:function(){var a=this.noWrapper?this.el:this.el.querySelector(".sendsay-popup"),b=a.querySelector(".sendsay-content");b.style.maxHeight="".concat(b.scrollHeight,"px")}},{key:"showErrorFor",value:function(a,c){(0,i["default"])((0,l["default"])(b.prototype),"showErrorFor",this).call(this,a,c),this.setSaneMaxHeight()}},{key:"handleClose",value:function(){var a=this.noWrapper?this.el:this.el.querySelector(".sendsay-popup"),b=a.querySelector(".sendsay-content");a.classList.contains("sendsay-opened")&&this.steps.length-1!==this.curStep?(a.classList.remove("sendsay-opened"),b.style.maxHeight="".concat(0,"px")):this.hide()}},{key:"makeClasses",value:function(){var a=(0,i["default"])((0,l["default"])(b.prototype),"makeClasses",this).call(this);return 0!==this.curStep&&(a+=" sendsay-opened"),a}},{key:"afterRender",value:function(){0!==this.curStep&&this.setSaneMaxHeight()}},{key:"proceedToNextStep",value:function(){var a,b=this;this.curStep++,0!==this.curStep&&(a=this.data.appearance.animation,this.data.appearance.animation="none"),this.render(),setTimeout(function(){b.data.appearance.animation=a,b.noWrapper?b.el.className=b.makeClasses():b.el.querySelector(".sendsay-popup").className=b.makeClasses()},100)}}]),b}(m.Popup);c.ToggleablePopup=p},{"../MediaQuery":26,"./Popup":40,"./Text":45,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":5,"@babel/runtime/helpers/get":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":13}],47:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=void 0;var d='\n  <svg viewBox="0 0 20 20" fill="none" class="sendsay-close__svg" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M1 1L19 19" stroke-width="2"/>\n  <path d="M19 1L1 19" stroke-width="2"/>\n  </svg>\n',e=d;c["default"]=e},{}],48:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=void 0;var d='\n  <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M40 20C40 31.0457 31.0457 40 20 40C8.95431 40 0 31.0457 0 20C0 8.95431 8.95431 0 20 0C31.0457 0 40 8.95431 40 20Z" fill="url(#paint0_linear)"/>\n  <g filter="url(#filter0_di)">\n  <path d="M29 17C30.6568 17 32 18.3432 32 20V20C32 21.6569 30.6568 23 29 23L11 23C9.34312 23 7.99997 21.6569 7.99997 20V20C7.99997 18.3432 9.34312 17 11 17L29 17Z" fill="white"/>\n  </g>\n  <defs>\n  <filter id="filter0_di" x="3.99997" y="15" width="32" height="14" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n  <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n  <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>\n  <feOffset dy="2"/>\n  <feGaussianBlur stdDeviation="2"/>\n  <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>\n  <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>\n  <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>\n  <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n  <feOffset dy="-1"/>\n  <feGaussianBlur stdDeviation="0.5"/>\n  <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>\n  <feColorMatrix type="matrix" values="0 0 0 0 0.72549 0 0 0 0 0.273725 0 0 0 0 0.0196078 0 0 0 0.25 0"/>\n  <feBlend mode="normal" in2="shape" result="effect2_innerShadow"/>\n  </filter>\n  <linearGradient id="paint0_linear" x1="26.5" y1="36" x2="15.75" y2="-5.25" gradientUnits="userSpaceOnUse">\n  <stop stop-color="#F14800"/>\n  <stop offset="1" stop-color="#FFD771"/>\n  </linearGradient>\n  </defs>\n  </svg>\n',e=d;c["default"]=e},{}],49:[function(a,b,c){"use strict";function d(){var a="ru";if(navigator){var b=(navigator.language||navigator.systemLanguage||navigator.userLanguage||"").substr(0,2).toLowerCase();b&&"ru"!==b&&(a="en")}return a}function e(a){return("en"===d()?g.en[a]:f.ru[a])||a}Object.defineProperty(c,"__esModule",{value:!0}),c.l8n=e;var f=a("./locales/ru"),g=a("./locales/en")},{"./locales/en":50,"./locales/ru":51}],50:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.en=void 0;var d={"notify__form-is-inactive":"The subscription form is currently inactive"};c.en=d},{}],51:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ru=void 0;var d={"notify__form-is-inactive":"Извините, форма подписки сейчас неактивна"};c.ru=d},{}],52:[function(a,b,c){"use strict";function d(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function e(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?d(Object(c),!0).forEach(function(b){(0,g["default"])(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):d(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var f=a("@babel/runtime/helpers/interopRequireDefault"),g=f(a("@babel/runtime/helpers/defineProperty")),h=a("./classes/elements/Popup"),i=a("./classes/elements/PopupBar"),j=a("./classes/elements/ToggleablePopup"),k=a("./classes/elements/Embedded"),l=a("./classes/Connector"),m=a("./classes/Form"),n=f(a("./classes/EmbeddedFormWatcher")),o={forms:{css:{url:"https://image.sendsay.ru/app/js/forms/forms.min.css"}}};!function(){var a,b,c=e(e({},o),(null===(a=(b=window).SENDSAY_FORMS_CONFIG)||void 0===a?void 0:a.call(b))||{}),d=function(a){var b="_sendsay-styles";if(document.getElementById(b))"function"==typeof a&&a();else{var d=document.createElement("link"),e=!1;d.id=b,d.rel="stylesheet",d.type="text/css",d.href=c.forms.css.url,d.media="all";var f=document.querySelector("#sendsay-generated-sheet");f?document.head.insertBefore(d,f):document.head.appendChild(d),d.addEventListener("load",function(){d.removeEventListener("load",a),e||(e=!0,a())})}},f=function(a,b){return new Promise(function(c){d(function(){var d=new l.Connector(a),e=new m.Form(d,b);c({runWatcher:function(){return e.runWatcher()},stopWatcher:function(){return e.stopWatcher()}})})})},g=function(a,b){return d(function(){var c;switch(a.type){case"popup":c=h.Popup;break;case"bar":c=i.PopupBar;break;case"widget":c=j.ToggleablePopup;break;case"embedded":c=k.Embedded}var d=new c(a);d.activate(b)})},p=new n["default"](f);p.start(),window.SENDSAY={config:c,activatePopup:f,showPopup:g}}()},{"./classes/Connector":21,"./classes/EmbeddedFormWatcher":24,"./classes/Form":25,"./classes/elements/Embedded":34,"./classes/elements/Popup":40,"./classes/elements/PopupBar":41,"./classes/elements/ToggleablePopup":46,"@babel/runtime/helpers/defineProperty":6,"@babel/runtime/helpers/interopRequireDefault":10}],53:[function(a,b,c){
"use strict";function d(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.hostname;try{var b=a.match(e);if(b){var c=b[0];return"."===c.charAt(0)&&(c=c.substring(1)),c}}catch(d){return a}return a}Object.defineProperty(c,"__esModule",{value:!0}),c.getHostName=d;var e=/(^|\.)[a-zA-Z0-9\-]+\.{0,1}[a-zA-Z0-9\-]*$/},{}],54:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getHostName",{enumerable:!0,get:function(){return d.getHostName}}),Object.defineProperty(c,"toNumber",{enumerable:!0,get:function(){return e.toNumber}}),Object.defineProperty(c,"LeaveCounter",{enumerable:!0,get:function(){return f.LeaveCounter}});var d=a("./getHostName"),e=a("./toNumber"),f=a("./leaveCounter")},{"./getHostName":53,"./leaveCounter":55,"./toNumber":56}],55:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.LeaveCounter=void 0;var d=a("./toNumber"),e=function(a){return"sendsay-form-".concat(a)},f={get:function(a){return localStorage[e(a)]},increment:function(a){localStorage[e(a)]=Math.min((0,d.toNumber)(localStorage[e(a)])+1||1,2)},decrement:function(a){localStorage[e(a)]=Math.max((0,d.toNumber)(localStorage[e(a)])-1||0,0)}};c.LeaveCounter=f},{"./toNumber":56}],56:[function(a,b,c){"use strict";function d(a){return parseInt(a,10)||0}Object.defineProperty(c,"__esModule",{value:!0}),c.toNumber=d},{}]},{},[52,28,19,20,21,22,23,29,30,31,33,32,34,35,36,37,38,39,40,41,42,43,44,45,46,24,25,26,27]);